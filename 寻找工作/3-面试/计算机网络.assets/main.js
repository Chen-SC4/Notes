/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => ObsidianImageEnhancePlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var import_view = require("@codemirror/view");

// src/utils/image-link-utils.ts
function parseImageSyntaxFromLine(lineText) {
  var _a, _b, _c;
  const markdownRegex = /!\[(.*?)?(?:\|(\d+(?:x\d+)?))?\]\(([^)]+)\)/;
  let match = lineText.match(markdownRegex);
  if (match) {
    const altText = match[1] || void 0;
    const dimensionsString = match[2];
    const path = match[3].trim();
    let specifiedWidth;
    let specifiedHeight;
    if (dimensionsString) {
      const dims = dimensionsString.split("x");
      if (dims[0]) {
        specifiedWidth = parseInt(dims[0], 10);
      }
      if (dims.length > 1 && dims[1]) {
        specifiedHeight = parseInt(dims[1], 10);
      }
    }
    return {
      path,
      altText,
      specifiedWidth,
      specifiedHeight,
      originalMatch: match[0],
      startIndexInLine: (_a = match.index) != null ? _a : 0,
      isHtml: false
    };
  }
  const wikilinkRegex = /!\[\[([^|\]]+)(?:\|([^|\]]*))?\]\]/;
  match = lineText.match(wikilinkRegex);
  if (match) {
    const path = match[1].trim();
    const altOrDimensions = match[2];
    let specifiedWidth;
    let specifiedHeight;
    let altText = altOrDimensions;
    if (altOrDimensions) {
      const dimMatch = altOrDimensions.match(/^(\d+)(?:x(\d+))?$/);
      if (dimMatch) {
        if (dimMatch[1]) {
          specifiedWidth = parseInt(dimMatch[1], 10);
        }
        if (dimMatch[2]) {
          specifiedHeight = parseInt(dimMatch[2], 10);
        }
        altText = void 0;
      }
    }
    return {
      path,
      altText,
      specifiedWidth,
      specifiedHeight,
      originalMatch: match[0],
      startIndexInLine: (_b = match.index) != null ? _b : 0,
      isHtml: false
    };
  }
  const htmlImgRegex = /(<img\s+(?:[^>]*?\s+)?src=(?:["']([^"']+)["']|([^>\s]+))(?:\s+[^>]*?\s*alt=(?:["']([^"']*)["']|([^>\s]*)))?(?:\s+[^>]*?\s*style=(?:["']([^"']+)["']|([^>\s]+)))?[^>]*?>)/i;
  const htmlMatch = lineText.match(htmlImgRegex);
  if (htmlMatch) {
    const originalHtmlTag = htmlMatch[0];
    const path = htmlMatch[2] || htmlMatch[3];
    const altText = htmlMatch[4] || htmlMatch[5] || void 0;
    const styleString = htmlMatch[6] || htmlMatch[7] || void 0;
    let specifiedWidth;
    let specifiedHeight;
    let currentZoomP;
    if (styleString) {
      const widthMatch = styleString.match(/width:\s*(\d+)px/i);
      if (widthMatch && widthMatch[1]) {
        specifiedWidth = parseInt(widthMatch[1], 10);
      }
      const heightMatch = styleString.match(/height:\s*(\d+)px/i);
      if (heightMatch && heightMatch[1]) {
        specifiedHeight = parseInt(heightMatch[1], 10);
      }
      const zoomMatch = styleString.match(/zoom:\s*(\d+)%?/i);
      if (zoomMatch && zoomMatch[1]) {
        currentZoomP = parseInt(zoomMatch[1], 10);
      }
    }
    if (path) {
      return {
        path: path.trim(),
        altText: altText ? altText.trim() : void 0,
        specifiedWidth,
        specifiedHeight,
        currentZoomPercent: currentZoomP,
        isHtml: true,
        originalMatch: originalHtmlTag,
        startIndexInLine: (_c = htmlMatch.index) != null ? _c : 0
      };
    }
  }
  return null;
}

// src/main.ts
function getLineInfoFromElement(view, element) {
  let pos;
  if (pos === void 0) {
    try {
      pos = view.posAtDOM(element);
    } catch (e) {
      return null;
    }
  }
  if (pos === null || pos === void 0)
    return null;
  try {
    const line = view.state.doc.lineAt(pos);
    console.log("\u83B7\u53D6\u884C\u4FE1\u606F\u6210\u529F:", line, pos);
    return {
      pos,
      lineText: line.text,
      lineFrom: line.from,
      lineTo: line.to
    };
  } catch (e) {
    console.error("Error getting line text from element position:", pos, e);
    return null;
  }
}
var ObsidianImageEnhancePlugin = class extends import_obsidian.Plugin {
  async onload() {
    console.log("\u56FE\u7247\u589E\u5F3A\u63D2\u4EF6\u52A0\u8F7D\u6210\u529F!");
    this.registerEditorExtension(this.createLivePreviewHoverExtension());
  }
  createLivePreviewHoverExtension() {
    return import_view.ViewPlugin.fromClass(ImageHoverViewPlugin);
  }
  onunload() {
    console.log("\u56FE\u7247\u589E\u5F3A\u63D2\u4EF6\u5378\u8F7D!");
  }
};
var ImageHoverViewPlugin = class {
  // 鼠标按下时，点到图片中心的初始距离
  constructor(view) {
    this.view = view;
    this.lastHoveredImg = null;
    this.activeImgMouseMoveUnlistener = null;
    this.activeImgMouseLeaveUnlistener = null;
    this.activeImgMouseDownUnlistener = null;
    // 新增：用于mousedown事件
    // 拖拽状态相关
    this.isDragging = false;
    this.dragStartX = 0;
    this.dragStartY = 0;
    this.initialImageWidth = 0;
    // 用于百分比缩放计算
    this.initialImageHeight = 0;
    // 用于百分比缩放计算
    this.currentZoomPercent = 100;
    // 当前图片的缩放百分比
    this.lineInfoAtDragStart = null;
    // 拖拽开始时的行信息
    this.draggedImageInfo = null;
    // 拖拽开始时的图片信息
    this.imageCenterX = 0;
    // 图片中心点X坐标
    this.imageCenterY = 0;
    // 图片中心点Y坐标
    this.initialDistanceToCenter = 0;
    this.contentDom = view.contentDOM;
    this.handleContainerMouseMove = this.handleContainerMouseMove.bind(this);
    this.handleContainerMouseLeave = this.handleContainerMouseLeave.bind(this);
    this.handleImageSpecificMouseDown = this.handleImageSpecificMouseDown.bind(this);
    this.handleDocumentMouseMoveWhileDragging = this.handleDocumentMouseMoveWhileDragging.bind(this);
    this.handleDocumentMouseUp = this.handleDocumentMouseUp.bind(this);
    this.contentDom.addEventListener(
      "mousemove",
      this.handleContainerMouseMove
    );
    this.contentDom.addEventListener(
      "mouseleave",
      this.handleContainerMouseLeave
    );
  }
  update(update) {
    if (this.isDragging && update.docChanged) {
      const imgElement = this.lastHoveredImg;
      if (imgElement && !document.body.contains(imgElement)) {
        this.resetDragState();
      } else if (this.lineInfoAtDragStart) {
        try {
          const currentLine = this.view.state.doc.lineAt(
            this.lineInfoAtDragStart.pos
          );
          if (currentLine.text !== this.lineInfoAtDragStart.lineText) {
          }
        } catch (e) {
          this.resetDragState();
        }
      }
    }
  }
  resetDragState() {
    this.isDragging = false;
    document.removeEventListener(
      "mousemove",
      this.handleDocumentMouseMoveWhileDragging
    );
    document.removeEventListener("mouseup", this.handleDocumentMouseUp);
    this.lineInfoAtDragStart = null;
    this.draggedImageInfo = null;
    if (this.lastHoveredImg) {
      this.lastHoveredImg.style.cursor = "default";
    }
  }
  destroy() {
    this.contentDom.removeEventListener(
      "mousemove",
      this.handleContainerMouseMove
    );
    this.contentDom.removeEventListener(
      "mouseleave",
      this.handleContainerMouseLeave
    );
    this.clearActiveImageState();
    document.removeEventListener(
      "mousemove",
      this.handleDocumentMouseMoveWhileDragging
    );
    document.removeEventListener("mouseup", this.handleDocumentMouseUp);
  }
  clearActiveImageState() {
    if (this.lastHoveredImg) {
      this.lastHoveredImg.classList.remove("image-hover-highlight");
      this.lastHoveredImg.style.cursor = "";
      if (this.activeImgMouseMoveUnlistener)
        this.activeImgMouseMoveUnlistener();
      if (this.activeImgMouseLeaveUnlistener)
        this.activeImgMouseLeaveUnlistener();
      if (this.activeImgMouseDownUnlistener)
        this.activeImgMouseDownUnlistener();
      this.activeImgMouseMoveUnlistener = null;
      this.activeImgMouseLeaveUnlistener = null;
      this.activeImgMouseDownUnlistener = null;
      this.lastHoveredImg = null;
    }
    if (this.isDragging) {
      this.resetDragState();
    }
  }
  handleContainerMouseMove(event) {
    if (this.isDragging)
      return;
    const targetElement = event.target;
    let currentTargetIsOurImage = false;
    const imgCheck = targetElement.closest(
      "img, .cm-widgetImage img, .image-embed img, span.cm-image img, figure.image-container img"
    );
    if (imgCheck && imgCheck.nodeName === "IMG" && this.contentDom.contains(imgCheck)) {
      const imgTarget = imgCheck;
      currentTargetIsOurImage = true;
      if (this.lastHoveredImg !== imgTarget) {
        this.clearActiveImageState();
        this.lastHoveredImg = imgTarget;
        imgTarget.classList.add("image-hover-highlight");
        const onImageMouseMove = (e) => this.handleImageSpecificMouseMove(e, imgTarget);
        const onImageMouseLeave = (e) => this.handleImageSpecificMouseLeave(e, imgTarget);
        const onImageMouseDown = (e) => this.handleImageSpecificMouseDown(e, imgTarget);
        imgTarget.addEventListener("mousemove", onImageMouseMove);
        imgTarget.addEventListener("mouseleave", onImageMouseLeave);
        imgTarget.addEventListener("mousedown", onImageMouseDown);
        this.activeImgMouseMoveUnlistener = () => imgTarget.removeEventListener(
          "mousemove",
          onImageMouseMove
        );
        this.activeImgMouseLeaveUnlistener = () => imgTarget.removeEventListener(
          "mouseleave",
          onImageMouseLeave
        );
        this.activeImgMouseDownUnlistener = () => imgTarget.removeEventListener(
          "mousedown",
          onImageMouseDown
        );
      }
    }
    if (!currentTargetIsOurImage && this.lastHoveredImg) {
      if (!this.lastHoveredImg.contains(targetElement)) {
        this.clearActiveImageState();
      }
    }
  }
  handleContainerMouseLeave(event) {
    if (this.isDragging)
      return;
    const relatedTargetIsOutside = !event.relatedTarget || !this.contentDom.contains(event.relatedTarget);
    if (relatedTargetIsOutside) {
      this.clearActiveImageState();
    }
  }
  handleImageSpecificMouseMove(event, imgElement) {
    if (this.isDragging) {
      return;
    }
    const rect = imgElement.getBoundingClientRect();
    const sensitivity = 8;
    const x = event.clientX - rect.left;
    const y = event.clientY - rect.top;
    let cursorStyle = "grab";
    const onLeftEdge = x < sensitivity;
    const onRightEdge = x > rect.width - sensitivity;
    const onTopEdge = y < sensitivity;
    const onBottomEdge = y > rect.height - sensitivity;
    if (onTopEdge && onLeftEdge)
      cursorStyle = "nwse-resize";
    else if (onTopEdge && onRightEdge)
      cursorStyle = "nesw-resize";
    else if (onBottomEdge && onLeftEdge)
      cursorStyle = "nesw-resize";
    else if (onBottomEdge && onRightEdge)
      cursorStyle = "nwse-resize";
    else if (onLeftEdge || onRightEdge)
      cursorStyle = "ew-resize";
    else if (onTopEdge || onBottomEdge)
      cursorStyle = "ns-resize";
    imgElement.style.cursor = cursorStyle;
  }
  handleImageSpecificMouseLeave(event, imgElement) {
    if (!this.isDragging) {
      imgElement.style.cursor = "";
    }
  }
  /**
   * 当在图片上按下鼠标时触发 (已通过 handleContainerMouseMove 添加监听)
   */
  handleImageSpecificMouseDown(event, imgElement) {
    const cursorStyle = imgElement.style.cursor;
    if (cursorStyle && cursorStyle.includes("-resize")) {
      event.preventDefault();
      event.stopPropagation();
      this.lineInfoAtDragStart = getLineInfoFromElement(
        this.view,
        imgElement
      );
      if (this.lineInfoAtDragStart) {
        const { lineText, lineFrom } = this.lineInfoAtDragStart;
        const parsedInfo = parseImageSyntaxFromLine(lineText);
        if (parsedInfo) {
          this.draggedImageInfo = {
            // 初始化 draggedImageInfo
            path: parsedInfo.path,
            altText: parsedInfo.altText,
            sourceWidth: parsedInfo.specifiedWidth,
            sourceHeight: parsedInfo.specifiedHeight
          };
          console.log(
            `\u56FE\u7247\u62D6\u62FD\u51C6\u5907: Path="${this.draggedImageInfo.path}", Type=${parsedInfo.isHtml ? "HTML" : "MD/Wiki"}, W=${parsedInfo.specifiedWidth}, H=${parsedInfo.specifiedHeight}, Zoom=${parsedInfo.currentZoomPercent}`
          );
          if (parsedInfo.specifiedWidth) {
            this.initialImageWidth = parsedInfo.specifiedWidth;
          } else {
            this.initialImageWidth = imgElement.offsetWidth;
          }
          if (!this.initialImageWidth || this.initialImageWidth <= 0)
            this.initialImageWidth = 200;
          const rect = imgElement.getBoundingClientRect();
          this.imageCenterX = rect.left + rect.width / 2;
          this.imageCenterY = rect.top + rect.height / 2;
          this.dragStartX = event.clientX;
          this.dragStartY = event.clientY;
          const initialDxToCenter = event.clientX - this.imageCenterX;
          const initialDyToCenter = event.clientY - this.imageCenterY;
          this.initialDistanceToCenter = Math.sqrt(
            initialDxToCenter * initialDxToCenter + initialDyToCenter * initialDyToCenter
          );
          if (parsedInfo.isHtml) {
            this.currentZoomPercent = parsedInfo.currentZoomPercent !== void 0 ? parsedInfo.currentZoomPercent : 100;
            console.log(
              `\u5904\u7406\u73B0\u6709HTML: Zoom=${this.currentZoomPercent}%, \u7EE7\u627F\u5C3A\u5BF8 W=${this.draggedImageInfo.sourceWidth}, H=${this.draggedImageInfo.sourceHeight}`
            );
          } else {
            this.currentZoomPercent = 100;
            let styleString = "";
            if (this.draggedImageInfo.sourceWidth)
              styleString += `width: ${this.draggedImageInfo.sourceWidth}px; `;
            if (this.draggedImageInfo.sourceHeight)
              styleString += `height: ${this.draggedImageInfo.sourceHeight}px; `;
            styleString += `zoom: ${this.currentZoomPercent}%;`;
            const safeAltText = this.draggedImageInfo.altText ? escapeHtml(this.draggedImageInfo.altText) : "";
            const newImgTag = `<img src="${this.draggedImageInfo.path}" alt="${safeAltText}" style="${styleString.trim()}">`;
            const from = lineFrom + parsedInfo.startIndexInLine;
            const to = from + parsedInfo.originalMatch.length;
            console.log(
              `\u8F6C\u6362MD/Wiki\u4E3AHTML: \u4ECE "${parsedInfo.originalMatch}" \u5230 "${newImgTag}"`
            );
            const tr = this.view.state.update({
              changes: { from, to, insert: newImgTag },
              selection: {
                anchor: this.view.state.selection.main.head
              },
              userEvent: "image.resize.convert"
            });
            this.view.dispatch(tr);
          }
        } else {
          console.warn(
            "Mousedown: \u65E0\u6CD5\u89E3\u6790\u884C\u4E2D\u7684\u4EFB\u4F55\u56FE\u7247\u8BED\u6CD5:",
            lineText
          );
          this.resetDragState();
          return;
        }
      } else {
        console.warn("Mousedown: \u65E0\u6CD5\u83B7\u53D6\u56FE\u7247\u6240\u5728\u884C\u7684\u4FE1\u606F\u3002");
        this.resetDragState();
        return;
      }
      this.isDragging = true;
      document.addEventListener(
        "mousemove",
        this.handleDocumentMouseMoveWhileDragging
      );
      document.addEventListener("mouseup", this.handleDocumentMouseUp);
    }
  }
  /**
   * 当鼠标在整个文档上移动时触发 (仅当 isDragging 为 true 时)
   */
  handleDocumentMouseMoveWhileDragging(event) {
    var _a;
    if (!this.isDragging || !this.lastHoveredImg || !this.lineInfoAtDragStart || !((_a = this.draggedImageInfo) == null ? void 0 : _a.path)) {
      this.resetDragState();
      return;
    }
    event.preventDefault();
    event.stopPropagation();
    const currentMouseX = event.clientX;
    const currentMouseY = event.clientY;
    const dxToCenterCurrent = currentMouseX - this.imageCenterX;
    const dyToCenterCurrent = currentMouseY - this.imageCenterY;
    const currentDistanceToCenter = Math.sqrt(
      dxToCenterCurrent * dxToCenterCurrent + dyToCenterCurrent * dyToCenterCurrent
    );
    const distanceChange = currentDistanceToCenter - this.initialDistanceToCenter;
    const zoomSensitivity = 0.2;
    const zoomDelta = distanceChange * zoomSensitivity;
    let newZoom = Math.round(this.currentZoomPercent + zoomDelta);
    newZoom = Math.max(10, Math.min(newZoom, 500));
    this.lastHoveredImg.style.zoom = `${newZoom}%`;
  }
  /**
   * 当鼠标按键在整个文档上松开时触发 (仅当 isDragging 为 true 时)
   */
  handleDocumentMouseUp(event) {
    if (!this.isDragging || !this.lastHoveredImg || !this.lineInfoAtDragStart || !this.draggedImageInfo) {
      this.resetDragState();
      return;
    }
    event.preventDefault();
    event.stopPropagation();
    const finalZoomMatch = this.lastHoveredImg.style.zoom.match(/(\d+)/);
    let finalZoomPercent = this.currentZoomPercent;
    if (finalZoomMatch && finalZoomMatch[1]) {
      finalZoomPercent = parseInt(finalZoomMatch[1], 10);
    }
    finalZoomPercent = Math.max(10, Math.min(finalZoomPercent, 500));
    console.log(`\u62D6\u62FD\u7ED3\u675F\uFF0C\u6700\u7EC8\u7F29\u653E: ${finalZoomPercent}%`);
    let finalStyleString = "";
    if (this.draggedImageInfo.sourceWidth) {
      finalStyleString += `width: ${this.draggedImageInfo.sourceWidth}px; `;
    }
    if (this.draggedImageInfo.sourceHeight) {
      finalStyleString += `height: ${this.draggedImageInfo.sourceHeight}px; `;
    }
    finalStyleString += `zoom: ${finalZoomPercent}%;`;
    const safeAltTextFinal = this.draggedImageInfo.altText ? escapeHtml(this.draggedImageInfo.altText) : "";
    const newImgTagFinal = `<img src="${this.draggedImageInfo.path}" alt="${safeAltTextFinal}" style="${finalStyleString.trim()}">`;
    const { lineFrom } = this.lineInfoAtDragStart;
    const currentLineContent = this.view.state.doc.lineAt(lineFrom).text;
    const imgTagToReplaceRegex = new RegExp(
      `<img\\s+src=(?:["']${escapeRegExp(
        this.draggedImageInfo.path
      )}["']|${escapeRegExp(this.draggedImageInfo.path)})[^>]*>`,
      // 匹配到标签结束
      "i"
    );
    const matchForUpdate = currentLineContent.match(imgTagToReplaceRegex);
    let fromPos, toPos;
    if (matchForUpdate && matchForUpdate.index !== void 0) {
      fromPos = lineFrom + matchForUpdate.index;
      toPos = fromPos + matchForUpdate[0].length;
    } else {
      console.warn(
        `MouseUp: \u65E0\u6CD5\u5728\u884C\u4E2D\u627E\u5230\u8981\u66F4\u65B0\u7684 <img /> \u6807\u7B7E\u3002\u884C\u5185\u5BB9: "${currentLineContent}", \u671F\u671B\u8DEF\u5F84: ${this.draggedImageInfo.path}`
      );
      const originalSyntaxInfo = parseImageSyntaxFromLine(
        this.lineInfoAtDragStart.lineText
      );
      if (originalSyntaxInfo && originalSyntaxInfo.path === this.draggedImageInfo.path) {
        console.log(
          "MouseUp: \u5C1D\u8BD5\u4F7F\u7528\u539F\u59CBMarkdown/Wikilink\u4F4D\u7F6E\u8FDB\u884C\u66FF\u6362\u3002"
        );
        fromPos = lineFrom + originalSyntaxInfo.startIndexInLine;
        toPos = fromPos + originalSyntaxInfo.originalMatch.length;
      } else {
        this.resetDragState();
        return;
      }
    }
    if (fromPos !== void 0 && toPos !== void 0) {
      const tr = this.view.state.update({
        changes: { from: fromPos, to: toPos, insert: newImgTagFinal },
        selection: { anchor: this.view.state.selection.main.head },
        userEvent: "image.resize.update"
      });
      this.view.dispatch(tr);
      console.log(
        `\u56FE\u7247 "${this.draggedImageInfo.path}" \u6837\u5F0F\u5DF2\u66F4\u65B0: ${finalStyleString.trim()}`
      );
    }
    this.resetDragState();
  }
};
function escapeHtml(unsafe) {
  return unsafe.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#039;");
}
function escapeRegExp(string) {
  return string.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
}
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3V0aWxzL2ltYWdlLWxpbmstdXRpbHMudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IFBsdWdpbiB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgeyBFZGl0b3JWaWV3LCBWaWV3UGx1Z2luLCBWaWV3VXBkYXRlIH0gZnJvbSBcIkBjb2RlbWlycm9yL3ZpZXdcIjtcclxuaW1wb3J0IHsgcGFyc2VJbWFnZVN5bnRheEZyb21MaW5lIH0gZnJvbSBcIi4vdXRpbHNcIjsgLy8gXHU1QkZDXHU1MTY1XHU2M0QwXHU1M0Q2XHU1NkZFXHU3MjQ3XHU4REVGXHU1Rjg0XHU3Njg0XHU1REU1XHU1MTc3XHU1MUZEXHU2NTcwXHJcbi8vIFx1NUJGQ1x1NTE2NSBFZGl0b3JTdGF0ZSwgRWRpdG9yU2VsZWN0aW9uLCBUcmFuc2FjdGlvbiBcdTc1MjhcdTRFOEVcdTRGRUVcdTY1MzlcdTdGMTZcdThGOTFcdTU2NjhcdTUxODVcdTVCQjlcclxuXHJcbi8vIFx1OEY4NVx1NTJBOVx1NTFGRFx1NjU3MFx1RkYxQVx1NUMxRFx1OEJENVx1NEVDRURPTVx1NTE0M1x1N0QyMFx1NTQxMVx1NEUwQVx1OEZGRFx1NkVBRlx1RkYwQ1x1NjI3RVx1NTIzMFx1NTE3Nlx1NTcyOENvZGVNaXJyb3JcdTY1ODdcdTY4NjNcdTRFMkRcdTc2ODRcdTRGNERcdTdGNkVcdTU0OENcdTVCRjlcdTVFOTRcdTg4NENcdTc2ODRcdTY1ODdcdTY3MkNcclxuLy8gXHU4RkQ5XHU1QkY5XHU0RThFXHU1OTA0XHU3NDA2XHU1RDRDXHU1OTU3XHU1NzI4XHU1OTBEXHU2NzQyV2lkZ2V0XHU0RTJEXHU3Njg0XHU1NkZFXHU3MjQ3XHU1MTQzXHU3RDIwXHU1QzI0XHU1MTc2XHU5MUNEXHU4OTgxXHJcbmZ1bmN0aW9uIGdldExpbmVJbmZvRnJvbUVsZW1lbnQoXHJcblx0dmlldzogRWRpdG9yVmlldyxcclxuXHRlbGVtZW50OiBIVE1MRWxlbWVudFxyXG4pOiB7IHBvczogbnVtYmVyOyBsaW5lVGV4dDogc3RyaW5nOyBsaW5lRnJvbTogbnVtYmVyOyBsaW5lVG86IG51bWJlciB9IHwgbnVsbCB7XHJcblx0bGV0IHBvczogbnVtYmVyIHwgdW5kZWZpbmVkO1xyXG5cclxuXHRpZiAocG9zID09PSB1bmRlZmluZWQpIHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdHBvcyA9IHZpZXcucG9zQXRET00oZWxlbWVudCk7XHJcblx0XHR9IGNhdGNoIChlKSB7XHJcblx0XHRcdC8vIGNvbnNvbGUud2FybihcInBvc0F0RE9NIGZhaWxlZCBmb3IgZWxlbWVudDpcIiwgZWxlbWVudCwgZSk7XHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0aWYgKHBvcyA9PT0gbnVsbCB8fCBwb3MgPT09IHVuZGVmaW5lZCkgcmV0dXJuIG51bGw7XHJcblxyXG5cdHRyeSB7XHJcblx0XHRjb25zdCBsaW5lID0gdmlldy5zdGF0ZS5kb2MubGluZUF0KHBvcyk7XHJcblx0XHRjb25zb2xlLmxvZyhcIlx1ODNCN1x1NTNENlx1ODg0Q1x1NEZFMVx1NjA2Rlx1NjIxMFx1NTI5RjpcIiwgbGluZSwgcG9zKTtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHBvcyxcclxuXHRcdFx0bGluZVRleHQ6IGxpbmUudGV4dCxcclxuXHRcdFx0bGluZUZyb206IGxpbmUuZnJvbSxcclxuXHRcdFx0bGluZVRvOiBsaW5lLnRvLFxyXG5cdFx0fTtcclxuXHR9IGNhdGNoIChlKSB7XHJcblx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2V0dGluZyBsaW5lIHRleHQgZnJvbSBlbGVtZW50IHBvc2l0aW9uOlwiLCBwb3MsIGUpO1xyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBPYnNpZGlhbkltYWdlRW5oYW5jZVBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XHJcblx0YXN5bmMgb25sb2FkKCkge1xyXG5cdFx0Y29uc29sZS5sb2coXCJcdTU2RkVcdTcyNDdcdTU4OUVcdTVGM0FcdTYzRDJcdTRFRjZcdTUyQTBcdThGN0RcdTYyMTBcdTUyOUYhXCIpO1xyXG5cdFx0dGhpcy5yZWdpc3RlckVkaXRvckV4dGVuc2lvbih0aGlzLmNyZWF0ZUxpdmVQcmV2aWV3SG92ZXJFeHRlbnNpb24oKSk7XHJcblx0fVxyXG5cclxuXHRjcmVhdGVMaXZlUHJldmlld0hvdmVyRXh0ZW5zaW9uKCkge1xyXG5cdFx0Ly8gXHU0RjdGXHU3NTI4XHU0RTAwXHU0RTJBXHU3QzdCXHU2NzY1XHU1MjFCXHU1RUZBIFZpZXdQbHVnaW5cdUZGMENcdThGRDlcdTY4MzdcdTUzRUZcdTRFRTVcdTdCQTFcdTc0MDZcdTcyQjZcdTYwMDFcdTU0OENcdTRFOEJcdTRFRjZcdTc2RDFcdTU0MkNcdTU2NjhcclxuXHRcdHJldHVybiBWaWV3UGx1Z2luLmZyb21DbGFzcyhJbWFnZUhvdmVyVmlld1BsdWdpbik7XHJcblx0fVxyXG5cclxuXHRvbnVubG9hZCgpIHtcclxuXHRcdGNvbnNvbGUubG9nKFwiXHU1NkZFXHU3MjQ3XHU1ODlFXHU1RjNBXHU2M0QyXHU0RUY2XHU1Mzc4XHU4RjdEIVwiKTtcclxuXHR9XHJcbn1cclxuXHJcbmNsYXNzIEltYWdlSG92ZXJWaWV3UGx1Z2luIHtcclxuXHRwcml2YXRlIGNvbnRlbnREb206IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgbGFzdEhvdmVyZWRJbWc6IEhUTUxJbWFnZUVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHJcblx0cHJpdmF0ZSBhY3RpdmVJbWdNb3VzZU1vdmVVbmxpc3RlbmVyOiAoKCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcclxuXHRwcml2YXRlIGFjdGl2ZUltZ01vdXNlTGVhdmVVbmxpc3RlbmVyOiAoKCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcclxuXHRwcml2YXRlIGFjdGl2ZUltZ01vdXNlRG93blVubGlzdGVuZXI6ICgoKSA9PiB2b2lkKSB8IG51bGwgPSBudWxsOyAvLyBcdTY1QjBcdTU4OUVcdUZGMUFcdTc1MjhcdTRFOEVtb3VzZWRvd25cdTRFOEJcdTRFRjZcclxuXHJcblx0Ly8gXHU2MkQ2XHU2MkZEXHU3MkI2XHU2MDAxXHU3NkY4XHU1MTczXHJcblx0cHJpdmF0ZSBpc0RyYWdnaW5nID0gZmFsc2U7XHJcblx0cHJpdmF0ZSBkcmFnU3RhcnRYID0gMDtcclxuXHRwcml2YXRlIGRyYWdTdGFydFkgPSAwO1xyXG5cdHByaXZhdGUgaW5pdGlhbEltYWdlV2lkdGggPSAwOyAvLyBcdTc1MjhcdTRFOEVcdTc2N0VcdTUyMDZcdTZCRDRcdTdGMjlcdTY1M0VcdThCQTFcdTdCOTdcclxuXHRwcml2YXRlIGluaXRpYWxJbWFnZUhlaWdodCA9IDA7IC8vIFx1NzUyOFx1NEU4RVx1NzY3RVx1NTIwNlx1NkJENFx1N0YyOVx1NjUzRVx1OEJBMVx1N0I5N1xyXG5cdHByaXZhdGUgY3VycmVudFpvb21QZXJjZW50ID0gMTAwOyAvLyBcdTVGNTNcdTUyNERcdTU2RkVcdTcyNDdcdTc2ODRcdTdGMjlcdTY1M0VcdTc2N0VcdTUyMDZcdTZCRDRcclxuXHRwcml2YXRlIGxpbmVJbmZvQXREcmFnU3RhcnQ6IHtcclxuXHRcdHBvczogbnVtYmVyO1xyXG5cdFx0bGluZVRleHQ6IHN0cmluZztcclxuXHRcdGxpbmVGcm9tOiBudW1iZXI7XHJcblx0XHRsaW5lVG86IG51bWJlcjtcclxuXHR9IHwgbnVsbCA9IG51bGw7IC8vIFx1NjJENlx1NjJGRFx1NUYwMFx1NTlDQlx1NjVGNlx1NzY4NFx1ODg0Q1x1NEZFMVx1NjA2RlxyXG5cdHByaXZhdGUgZHJhZ2dlZEltYWdlSW5mbzoge1xyXG5cdFx0cGF0aDogc3RyaW5nIHwgbnVsbDtcclxuXHRcdGFsdFRleHQ/OiBzdHJpbmc7XHJcblx0XHRzb3VyY2VXaWR0aD86IG51bWJlcjtcclxuXHRcdHNvdXJjZUhlaWdodD86IG51bWJlcjtcclxuXHR9IHwgbnVsbCA9IG51bGw7IC8vIFx1NjJENlx1NjJGRFx1NUYwMFx1NTlDQlx1NjVGNlx1NzY4NFx1NTZGRVx1NzI0N1x1NEZFMVx1NjA2RlxyXG5cdHByaXZhdGUgaW1hZ2VDZW50ZXJYID0gMDsgLy8gXHU1NkZFXHU3MjQ3XHU0RTJEXHU1RkMzXHU3MEI5WFx1NTc1MFx1NjgwN1xyXG5cdHByaXZhdGUgaW1hZ2VDZW50ZXJZID0gMDsgLy8gXHU1NkZFXHU3MjQ3XHU0RTJEXHU1RkMzXHU3MEI5WVx1NTc1MFx1NjgwN1xyXG5cdHByaXZhdGUgaW5pdGlhbERpc3RhbmNlVG9DZW50ZXIgPSAwOyAvLyBcdTlGMjBcdTY4MDdcdTYzMDlcdTRFMEJcdTY1RjZcdUZGMENcdTcwQjlcdTUyMzBcdTU2RkVcdTcyNDdcdTRFMkRcdTVGQzNcdTc2ODRcdTUyMURcdTU5Q0JcdThERERcdTc5QkJcclxuXHJcblx0Y29uc3RydWN0b3IocHJpdmF0ZSB2aWV3OiBFZGl0b3JWaWV3KSB7XHJcblx0XHR0aGlzLmNvbnRlbnREb20gPSB2aWV3LmNvbnRlbnRET007XHJcblxyXG5cdFx0dGhpcy5oYW5kbGVDb250YWluZXJNb3VzZU1vdmUgPVxyXG5cdFx0XHR0aGlzLmhhbmRsZUNvbnRhaW5lck1vdXNlTW92ZS5iaW5kKHRoaXMpO1xyXG5cdFx0dGhpcy5oYW5kbGVDb250YWluZXJNb3VzZUxlYXZlID1cclxuXHRcdFx0dGhpcy5oYW5kbGVDb250YWluZXJNb3VzZUxlYXZlLmJpbmQodGhpcyk7XHJcblx0XHQvLyBcdTdFRDFcdTVCOUFcdTY1QjBcdTc2ODRcdTU5MDRcdTc0MDZcdTU2NjhcclxuXHRcdHRoaXMuaGFuZGxlSW1hZ2VTcGVjaWZpY01vdXNlRG93biA9XHJcblx0XHRcdHRoaXMuaGFuZGxlSW1hZ2VTcGVjaWZpY01vdXNlRG93bi5iaW5kKHRoaXMpO1xyXG5cdFx0dGhpcy5oYW5kbGVEb2N1bWVudE1vdXNlTW92ZVdoaWxlRHJhZ2dpbmcgPVxyXG5cdFx0XHR0aGlzLmhhbmRsZURvY3VtZW50TW91c2VNb3ZlV2hpbGVEcmFnZ2luZy5iaW5kKHRoaXMpO1xyXG5cdFx0dGhpcy5oYW5kbGVEb2N1bWVudE1vdXNlVXAgPSB0aGlzLmhhbmRsZURvY3VtZW50TW91c2VVcC5iaW5kKHRoaXMpO1xyXG5cclxuXHRcdHRoaXMuY29udGVudERvbS5hZGRFdmVudExpc3RlbmVyKFxyXG5cdFx0XHRcIm1vdXNlbW92ZVwiLFxyXG5cdFx0XHR0aGlzLmhhbmRsZUNvbnRhaW5lck1vdXNlTW92ZVxyXG5cdFx0KTtcclxuXHRcdHRoaXMuY29udGVudERvbS5hZGRFdmVudExpc3RlbmVyKFxyXG5cdFx0XHRcIm1vdXNlbGVhdmVcIixcclxuXHRcdFx0dGhpcy5oYW5kbGVDb250YWluZXJNb3VzZUxlYXZlXHJcblx0XHQpO1xyXG5cdH1cclxuXHJcblx0dXBkYXRlKHVwZGF0ZTogVmlld1VwZGF0ZSkge1xyXG5cdFx0Ly8gXHU1OTgyXHU2NzlDXHU2NTg3XHU2ODYzXHU1M0QxXHU3NTFGXHU1M0Q4XHU1MzE2XHVGRjBDXHU0RTE0XHU1RjUzXHU1MjREXHU2QjYzXHU1NzI4XHU2MkQ2XHU2MkZEXHU3Njg0XHU1NkZFXHU3MjQ3XHU1M0Q3XHU1MjMwXHU0RTg2XHU1RjcxXHU1NENEXHVGRjBDXHU1M0VGXHU4MEZEXHU5NzAwXHU4OTgxXHU5MUNEXHU3RjZFXHU3MkI2XHU2MDAxXHJcblx0XHRpZiAodGhpcy5pc0RyYWdnaW5nICYmIHVwZGF0ZS5kb2NDaGFuZ2VkKSB7XHJcblx0XHRcdGNvbnN0IGltZ0VsZW1lbnQgPSB0aGlzLmxhc3RIb3ZlcmVkSW1nO1xyXG5cdFx0XHRpZiAoaW1nRWxlbWVudCAmJiAhZG9jdW1lbnQuYm9keS5jb250YWlucyhpbWdFbGVtZW50KSkge1xyXG5cdFx0XHRcdC8vIFx1NTE0M1x1N0QyMFx1ODhBQlx1NzlGQlx1OTY2NFxyXG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKFwiXHU2MkQ2XHU2MkZEXHU0RTJEXHU3Njg0XHU1NkZFXHU3MjQ3XHU1MTQzXHU3RDIwXHU1REYyXHU0RUNFXHU2NTg3XHU2ODYzXHU0RTJEXHU3OUZCXHU5NjY0XHVGRjBDXHU5MUNEXHU3RjZFXHU2MkQ2XHU2MkZEXHU3MkI2XHU2MDAxXHUzMDAyXCIpO1xyXG5cdFx0XHRcdHRoaXMucmVzZXREcmFnU3RhdGUoKTtcclxuXHRcdFx0fSBlbHNlIGlmICh0aGlzLmxpbmVJbmZvQXREcmFnU3RhcnQpIHtcclxuXHRcdFx0XHQvLyBcdTY4QzBcdTY3RTVcdTYyRDZcdTYyRkRcdTVGMDBcdTU5Q0JcdTY1RjZcdTc2ODRcdTg4NENcdTUxODVcdTVCQjlcdTY2MkZcdTU0MjZcdTUzRDFcdTc1MUZcdTUzRDhcdTUzMTZcclxuXHRcdFx0XHQvLyBcdThGRDlcdTY2MkZcdTRFMDBcdTRFMkFcdTdCODBcdTUzMTZcdTY4QzBcdTY3RTVcdUZGMENcdTY2RjRcdTU5MERcdTY3NDJcdTc2ODRcdTU3M0FcdTY2NkZcdTUzRUZcdTgwRkRcdTk3MDBcdTg5ODFcdTY2RjRcdTdDQkVcdTc4NkVcdTc2ODRcdThEREZcdThFMkFcclxuXHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudExpbmUgPSB0aGlzLnZpZXcuc3RhdGUuZG9jLmxpbmVBdChcclxuXHRcdFx0XHRcdFx0dGhpcy5saW5lSW5mb0F0RHJhZ1N0YXJ0LnBvc1xyXG5cdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdGlmIChcclxuXHRcdFx0XHRcdFx0Y3VycmVudExpbmUudGV4dCAhPT0gdGhpcy5saW5lSW5mb0F0RHJhZ1N0YXJ0LmxpbmVUZXh0XHJcblx0XHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdFx0Ly8gY29uc29sZS5sb2coXCJcdTYyRDZcdTYyRkRcdTRFMkRcdTc2ODRcdTU2RkVcdTcyNDdcdTYyNDBcdTU3MjhcdTg4NENcdTUxODVcdTVCQjlcdTVERjJcdTY1MzlcdTUzRDhcdUZGMENcdTkxQ0RcdTdGNkVcdTYyRDZcdTYyRkRcdTcyQjZcdTYwMDFcdTMwMDJcIik7XHJcblx0XHRcdFx0XHRcdC8vIHRoaXMucmVzZXREcmFnU3RhdGUoKTsgLy8gXHU4QzI4XHU2MTRFXHVGRjFBXHU1M0VGXHU4MEZEXHU4RkM3XHU0RThFXHU2NTRGXHU2MTFGXHVGRjBDXHU4MkU1XHU1M0VBXHU2NjJGem9vbVx1NTAzQ1x1NjZGNFx1NjVCMFx1NTIxOVx1NEUwRFx1NUU5NFx1OTFDRFx1N0Y2RVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gY2F0Y2ggKGUpIHtcclxuXHRcdFx0XHRcdC8vIGNvbnNvbGUud2FybihcIlx1NjhDMFx1NjdFNVx1NjJENlx1NjJGRFx1ODg0Q1x1NTNEOFx1NTMxNlx1NjVGNlx1NTFGQVx1OTUxOVx1RkYwQ1x1OTFDRFx1N0Y2RVx1NzJCNlx1NjAwMVwiLCBlKTtcclxuXHRcdFx0XHRcdHRoaXMucmVzZXREcmFnU3RhdGUoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVzZXREcmFnU3RhdGUoKSB7XHJcblx0XHR0aGlzLmlzRHJhZ2dpbmcgPSBmYWxzZTtcclxuXHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXHJcblx0XHRcdFwibW91c2Vtb3ZlXCIsXHJcblx0XHRcdHRoaXMuaGFuZGxlRG9jdW1lbnRNb3VzZU1vdmVXaGlsZURyYWdnaW5nXHJcblx0XHQpO1xyXG5cdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgdGhpcy5oYW5kbGVEb2N1bWVudE1vdXNlVXApO1xyXG5cdFx0dGhpcy5saW5lSW5mb0F0RHJhZ1N0YXJ0ID0gbnVsbDtcclxuXHRcdHRoaXMuZHJhZ2dlZEltYWdlSW5mbyA9IG51bGw7XHJcblx0XHQvLyBjb25zb2xlLmxvZyhcIlx1NjJENlx1NjJGRFx1NzJCNlx1NjAwMVx1NURGMlx1OTFDRFx1N0Y2RVx1MzAwMlwiKTtcclxuXHRcdC8vIFx1NjA2Mlx1NTkwRFx1NTE0OVx1NjgwN1x1N0I0OVx1RkYwQ1x1NTk4Mlx1Njc5Q1x1OTcwMFx1ODk4MVxyXG5cdFx0aWYgKHRoaXMubGFzdEhvdmVyZWRJbWcpIHtcclxuXHRcdFx0dGhpcy5sYXN0SG92ZXJlZEltZy5zdHlsZS5jdXJzb3IgPSBcImRlZmF1bHRcIjsgLy8gXHU2MjE2XHU2ODM5XHU2MzZFXHU0RTBBXHU0RTBCXHU2NTg3XHU4QkJFXHU3RjZFXHU1NkRFIGdyYWIvZWRnZSBjdXJzb3JzXHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRkZXN0cm95KCkge1xyXG5cdFx0dGhpcy5jb250ZW50RG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIoXHJcblx0XHRcdFwibW91c2Vtb3ZlXCIsXHJcblx0XHRcdHRoaXMuaGFuZGxlQ29udGFpbmVyTW91c2VNb3ZlXHJcblx0XHQpO1xyXG5cdFx0dGhpcy5jb250ZW50RG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIoXHJcblx0XHRcdFwibW91c2VsZWF2ZVwiLFxyXG5cdFx0XHR0aGlzLmhhbmRsZUNvbnRhaW5lck1vdXNlTGVhdmVcclxuXHRcdCk7XHJcblx0XHR0aGlzLmNsZWFyQWN0aXZlSW1hZ2VTdGF0ZSgpOyAvLyBcdTRGMUFcdTZFMDVcdTc0MDZcdTU2RkVcdTcyNDdcdTRFMEFcdTc2ODRcdTc2RDFcdTU0MkNcdTU2NjhcclxuXHRcdC8vIFx1Nzg2RVx1NEZERFx1NTE2OFx1NUM0MFx1NzZEMVx1NTQyQ1x1NTY2OFx1NEU1Rlx1ODhBQlx1NzlGQlx1OTY2NFx1RkYwOFx1NEVFNVx1OTYzMlx1NEUwN1x1NEUwMFx1RkYwOVxyXG5cdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcclxuXHRcdFx0XCJtb3VzZW1vdmVcIixcclxuXHRcdFx0dGhpcy5oYW5kbGVEb2N1bWVudE1vdXNlTW92ZVdoaWxlRHJhZ2dpbmdcclxuXHRcdCk7XHJcblx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCB0aGlzLmhhbmRsZURvY3VtZW50TW91c2VVcCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGNsZWFyQWN0aXZlSW1hZ2VTdGF0ZSgpIHtcclxuXHRcdGlmICh0aGlzLmxhc3RIb3ZlcmVkSW1nKSB7XHJcblx0XHRcdHRoaXMubGFzdEhvdmVyZWRJbWcuY2xhc3NMaXN0LnJlbW92ZShcImltYWdlLWhvdmVyLWhpZ2hsaWdodFwiKTtcclxuXHRcdFx0dGhpcy5sYXN0SG92ZXJlZEltZy5zdHlsZS5jdXJzb3IgPSBcIlwiO1xyXG5cclxuXHRcdFx0aWYgKHRoaXMuYWN0aXZlSW1nTW91c2VNb3ZlVW5saXN0ZW5lcilcclxuXHRcdFx0XHR0aGlzLmFjdGl2ZUltZ01vdXNlTW92ZVVubGlzdGVuZXIoKTtcclxuXHRcdFx0aWYgKHRoaXMuYWN0aXZlSW1nTW91c2VMZWF2ZVVubGlzdGVuZXIpXHJcblx0XHRcdFx0dGhpcy5hY3RpdmVJbWdNb3VzZUxlYXZlVW5saXN0ZW5lcigpO1xyXG5cdFx0XHRpZiAodGhpcy5hY3RpdmVJbWdNb3VzZURvd25Vbmxpc3RlbmVyKVxyXG5cdFx0XHRcdHRoaXMuYWN0aXZlSW1nTW91c2VEb3duVW5saXN0ZW5lcigpOyAvLyBcdTZFMDVcdTc0MDYgbW91c2Vkb3duIFx1NzZEMVx1NTQyQ1x1NTY2OFxyXG5cclxuXHRcdFx0dGhpcy5hY3RpdmVJbWdNb3VzZU1vdmVVbmxpc3RlbmVyID0gbnVsbDtcclxuXHRcdFx0dGhpcy5hY3RpdmVJbWdNb3VzZUxlYXZlVW5saXN0ZW5lciA9IG51bGw7XHJcblx0XHRcdHRoaXMuYWN0aXZlSW1nTW91c2VEb3duVW5saXN0ZW5lciA9IG51bGw7XHJcblx0XHRcdHRoaXMubGFzdEhvdmVyZWRJbWcgPSBudWxsO1xyXG5cdFx0fVxyXG5cdFx0Ly8gXHU1OTgyXHU2NzlDXHU1NkUwXHU0RTNBXHU1NkZFXHU3MjQ3XHU3MkI2XHU2MDAxXHU2RTA1XHU5NjY0XHU4MDBDXHU0RTJEXHU2NUFEXHU2MkQ2XHU2MkZEXHJcblx0XHRpZiAodGhpcy5pc0RyYWdnaW5nKSB7XHJcblx0XHRcdHRoaXMucmVzZXREcmFnU3RhdGUoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgaGFuZGxlQ29udGFpbmVyTW91c2VNb3ZlKGV2ZW50OiBNb3VzZUV2ZW50KSB7XHJcblx0XHRpZiAodGhpcy5pc0RyYWdnaW5nKSByZXR1cm47IC8vIFx1NTk4Mlx1Njc5Q1x1NkI2M1x1NTcyOFx1NjJENlx1NjJGRFx1RkYwQ1x1NTIxOVx1NEUwRFx1NTkwNFx1NzQwNlx1NUJCOVx1NTY2OFx1NzY4NCBtb3VzZW1vdmUgXHU2NzY1XHU1MjA3XHU2MzYyXHU1NkZFXHU3MjQ3XHJcblxyXG5cdFx0Y29uc3QgdGFyZ2V0RWxlbWVudCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuXHRcdGxldCBjdXJyZW50VGFyZ2V0SXNPdXJJbWFnZSA9IGZhbHNlO1xyXG5cclxuXHRcdC8vIFx1NjZGNFx1N0NCRVx1Nzg2RVx1NTczMFx1NUI5QVx1NEY0RFx1NTZGRVx1NzI0N1x1RkYwQ1x1NzI3OVx1NTIyQlx1NjYyRlx1NUY1M1x1NTZGRVx1NzI0N1x1ODhBQlx1NTMwNVx1ODhGOVx1NjVGNlxyXG5cdFx0Y29uc3QgaW1nQ2hlY2sgPSB0YXJnZXRFbGVtZW50LmNsb3Nlc3QoXHJcblx0XHRcdFwiaW1nLCAuY20td2lkZ2V0SW1hZ2UgaW1nLCAuaW1hZ2UtZW1iZWQgaW1nLCBzcGFuLmNtLWltYWdlIGltZywgZmlndXJlLmltYWdlLWNvbnRhaW5lciBpbWdcIlxyXG5cdFx0KTtcclxuXHJcblx0XHRpZiAoXHJcblx0XHRcdGltZ0NoZWNrICYmXHJcblx0XHRcdGltZ0NoZWNrLm5vZGVOYW1lID09PSBcIklNR1wiICYmXHJcblx0XHRcdHRoaXMuY29udGVudERvbS5jb250YWlucyhpbWdDaGVjaylcclxuXHRcdCkge1xyXG5cdFx0XHRjb25zdCBpbWdUYXJnZXQgPSBpbWdDaGVjayBhcyBIVE1MSW1hZ2VFbGVtZW50O1xyXG5cdFx0XHRjdXJyZW50VGFyZ2V0SXNPdXJJbWFnZSA9IHRydWU7XHJcblxyXG5cdFx0XHRpZiAodGhpcy5sYXN0SG92ZXJlZEltZyAhPT0gaW1nVGFyZ2V0KSB7XHJcblx0XHRcdFx0dGhpcy5jbGVhckFjdGl2ZUltYWdlU3RhdGUoKTsgLy8gXHU2RTA1XHU3NDA2XHU0RTBBXHU0RTAwXHU0RTJBXHU1NkZFXHU3MjQ3XHU3Njg0XHU3MkI2XHU2MDAxXHJcblx0XHRcdFx0dGhpcy5sYXN0SG92ZXJlZEltZyA9IGltZ1RhcmdldDtcclxuXHRcdFx0XHRpbWdUYXJnZXQuY2xhc3NMaXN0LmFkZChcImltYWdlLWhvdmVyLWhpZ2hsaWdodFwiKTtcclxuXHJcblx0XHRcdFx0Y29uc3Qgb25JbWFnZU1vdXNlTW92ZSA9IChlOiBNb3VzZUV2ZW50KSA9PlxyXG5cdFx0XHRcdFx0dGhpcy5oYW5kbGVJbWFnZVNwZWNpZmljTW91c2VNb3ZlKGUsIGltZ1RhcmdldCk7XHJcblx0XHRcdFx0Y29uc3Qgb25JbWFnZU1vdXNlTGVhdmUgPSAoZTogTW91c2VFdmVudCkgPT5cclxuXHRcdFx0XHRcdHRoaXMuaGFuZGxlSW1hZ2VTcGVjaWZpY01vdXNlTGVhdmUoZSwgaW1nVGFyZ2V0KTtcclxuXHRcdFx0XHRjb25zdCBvbkltYWdlTW91c2VEb3duID0gKGU6IE1vdXNlRXZlbnQpID0+XHJcblx0XHRcdFx0XHR0aGlzLmhhbmRsZUltYWdlU3BlY2lmaWNNb3VzZURvd24oZSwgaW1nVGFyZ2V0KTsgLy8gXHU2NUIwXHU1ODlFXHJcblxyXG5cdFx0XHRcdGltZ1RhcmdldC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIG9uSW1hZ2VNb3VzZU1vdmUpO1xyXG5cdFx0XHRcdGltZ1RhcmdldC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCBvbkltYWdlTW91c2VMZWF2ZSk7XHJcblx0XHRcdFx0aW1nVGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgb25JbWFnZU1vdXNlRG93bik7IC8vIFx1NkRGQlx1NTJBMCBtb3VzZWRvd24gXHU3NkQxXHU1NDJDXHJcblxyXG5cdFx0XHRcdHRoaXMuYWN0aXZlSW1nTW91c2VNb3ZlVW5saXN0ZW5lciA9ICgpID0+XHJcblx0XHRcdFx0XHRpbWdUYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcclxuXHRcdFx0XHRcdFx0XCJtb3VzZW1vdmVcIixcclxuXHRcdFx0XHRcdFx0b25JbWFnZU1vdXNlTW92ZVxyXG5cdFx0XHRcdFx0KTtcclxuXHRcdFx0XHR0aGlzLmFjdGl2ZUltZ01vdXNlTGVhdmVVbmxpc3RlbmVyID0gKCkgPT5cclxuXHRcdFx0XHRcdGltZ1RhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKFxyXG5cdFx0XHRcdFx0XHRcIm1vdXNlbGVhdmVcIixcclxuXHRcdFx0XHRcdFx0b25JbWFnZU1vdXNlTGVhdmVcclxuXHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0dGhpcy5hY3RpdmVJbWdNb3VzZURvd25Vbmxpc3RlbmVyID0gKCkgPT5cclxuXHRcdFx0XHRcdGltZ1RhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKFxyXG5cdFx0XHRcdFx0XHRcIm1vdXNlZG93blwiLFxyXG5cdFx0XHRcdFx0XHRvbkltYWdlTW91c2VEb3duXHJcblx0XHRcdFx0XHQpOyAvLyBcdTRGRERcdTVCNThcdTg5RTNcdTdFRDFcdTUxRkRcdTY1NzBcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICghY3VycmVudFRhcmdldElzT3VySW1hZ2UgJiYgdGhpcy5sYXN0SG92ZXJlZEltZykge1xyXG5cdFx0XHRpZiAoIXRoaXMubGFzdEhvdmVyZWRJbWcuY29udGFpbnModGFyZ2V0RWxlbWVudCkpIHtcclxuXHRcdFx0XHR0aGlzLmNsZWFyQWN0aXZlSW1hZ2VTdGF0ZSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGhhbmRsZUNvbnRhaW5lck1vdXNlTGVhdmUoZXZlbnQ6IE1vdXNlRXZlbnQpIHtcclxuXHRcdGlmICh0aGlzLmlzRHJhZ2dpbmcpIHJldHVybjsgLy8gXHU2MkQ2XHU2MkZEXHU2NUY2XHU0RTBEXHU1OTA0XHU3NDA2XHJcblxyXG5cdFx0Y29uc3QgcmVsYXRlZFRhcmdldElzT3V0c2lkZSA9XHJcblx0XHRcdCFldmVudC5yZWxhdGVkVGFyZ2V0IHx8XHJcblx0XHRcdCF0aGlzLmNvbnRlbnREb20uY29udGFpbnMoZXZlbnQucmVsYXRlZFRhcmdldCBhcyBOb2RlKTtcclxuXHRcdGlmIChyZWxhdGVkVGFyZ2V0SXNPdXRzaWRlKSB7XHJcblx0XHRcdHRoaXMuY2xlYXJBY3RpdmVJbWFnZVN0YXRlKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGhhbmRsZUltYWdlU3BlY2lmaWNNb3VzZU1vdmUoXHJcblx0XHRldmVudDogTW91c2VFdmVudCxcclxuXHRcdGltZ0VsZW1lbnQ6IEhUTUxJbWFnZUVsZW1lbnRcclxuXHQpIHtcclxuXHRcdGlmICh0aGlzLmlzRHJhZ2dpbmcpIHtcclxuXHRcdFx0Ly8gXHU1OTgyXHU2NzlDXHU2QjYzXHU1NzI4XHU2MkQ2XHU2MkZEXHVGRjBDXHU1MjE5XHU3NTMxIGRvY3VtZW50IFx1N0VBN1x1NTIyQlx1NEU4Qlx1NEVGNlx1NTkwNFx1NzQwNlx1NTE0OVx1NjgwN1x1NTQ4Q1x1OTAzQlx1OEY5MVxyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHRjb25zdCByZWN0ID0gaW1nRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHRcdGNvbnN0IHNlbnNpdGl2aXR5ID0gODtcclxuXHRcdGNvbnN0IHggPSBldmVudC5jbGllbnRYIC0gcmVjdC5sZWZ0O1xyXG5cdFx0Y29uc3QgeSA9IGV2ZW50LmNsaWVudFkgLSByZWN0LnRvcDtcclxuXHJcblx0XHRsZXQgY3Vyc29yU3R5bGUgPSBcImdyYWJcIjsgLy8gXHU5RUQ4XHU4QkE0XHU0RTNBXHU2MjkzXHU1M0Q2XHU1MTQ5XHU2ODA3XHVGRjBDXHU4ODY4XHU3OTNBXHU1NkZFXHU3MjQ3XHU1M0VGXHU0RUE0XHU0RTkyXHJcblx0XHRjb25zdCBvbkxlZnRFZGdlID0geCA8IHNlbnNpdGl2aXR5O1xyXG5cdFx0Y29uc3Qgb25SaWdodEVkZ2UgPSB4ID4gcmVjdC53aWR0aCAtIHNlbnNpdGl2aXR5O1xyXG5cdFx0Y29uc3Qgb25Ub3BFZGdlID0geSA8IHNlbnNpdGl2aXR5O1xyXG5cdFx0Y29uc3Qgb25Cb3R0b21FZGdlID0geSA+IHJlY3QuaGVpZ2h0IC0gc2Vuc2l0aXZpdHk7XHJcblxyXG5cdFx0aWYgKG9uVG9wRWRnZSAmJiBvbkxlZnRFZGdlKSBjdXJzb3JTdHlsZSA9IFwibndzZS1yZXNpemVcIjtcclxuXHRcdGVsc2UgaWYgKG9uVG9wRWRnZSAmJiBvblJpZ2h0RWRnZSkgY3Vyc29yU3R5bGUgPSBcIm5lc3ctcmVzaXplXCI7XHJcblx0XHRlbHNlIGlmIChvbkJvdHRvbUVkZ2UgJiYgb25MZWZ0RWRnZSkgY3Vyc29yU3R5bGUgPSBcIm5lc3ctcmVzaXplXCI7XHJcblx0XHRlbHNlIGlmIChvbkJvdHRvbUVkZ2UgJiYgb25SaWdodEVkZ2UpIGN1cnNvclN0eWxlID0gXCJud3NlLXJlc2l6ZVwiO1xyXG5cdFx0ZWxzZSBpZiAob25MZWZ0RWRnZSB8fCBvblJpZ2h0RWRnZSkgY3Vyc29yU3R5bGUgPSBcImV3LXJlc2l6ZVwiO1xyXG5cdFx0ZWxzZSBpZiAob25Ub3BFZGdlIHx8IG9uQm90dG9tRWRnZSkgY3Vyc29yU3R5bGUgPSBcIm5zLXJlc2l6ZVwiO1xyXG5cclxuXHRcdGltZ0VsZW1lbnQuc3R5bGUuY3Vyc29yID0gY3Vyc29yU3R5bGU7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGhhbmRsZUltYWdlU3BlY2lmaWNNb3VzZUxlYXZlKFxyXG5cdFx0ZXZlbnQ6IE1vdXNlRXZlbnQsXHJcblx0XHRpbWdFbGVtZW50OiBIVE1MSW1hZ2VFbGVtZW50XHJcblx0KSB7XHJcblx0XHRpZiAoIXRoaXMuaXNEcmFnZ2luZykge1xyXG5cdFx0XHQvLyBcdTUzRUFcdTY3MDlcdTU3MjhcdTk3NUVcdTYyRDZcdTYyRkRcdTcyQjZcdTYwMDFcdTRFMEJcdTc5RkJcdTUxRkFcdTU2RkVcdTcyNDdcdTYyNERcdTYwNjJcdTU5MERcdTlFRDhcdThCQTRcdTUxNDlcdTY4MDdcclxuXHRcdFx0aW1nRWxlbWVudC5zdHlsZS5jdXJzb3IgPSBcIlwiO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogXHU1RjUzXHU1NzI4XHU1NkZFXHU3MjQ3XHU0RTBBXHU2MzA5XHU0RTBCXHU5RjIwXHU2ODA3XHU2NUY2XHU4OUU2XHU1M0QxIChcdTVERjJcdTkwMUFcdThGQzcgaGFuZGxlQ29udGFpbmVyTW91c2VNb3ZlIFx1NkRGQlx1NTJBMFx1NzZEMVx1NTQyQylcclxuXHQgKi9cclxuXHRwcml2YXRlIGhhbmRsZUltYWdlU3BlY2lmaWNNb3VzZURvd24oXHJcblx0XHRldmVudDogTW91c2VFdmVudCxcclxuXHRcdGltZ0VsZW1lbnQ6IEhUTUxJbWFnZUVsZW1lbnRcclxuXHQpIHtcclxuXHRcdGNvbnN0IGN1cnNvclN0eWxlID0gaW1nRWxlbWVudC5zdHlsZS5jdXJzb3I7XHJcblx0XHRpZiAoY3Vyc29yU3R5bGUgJiYgY3Vyc29yU3R5bGUuaW5jbHVkZXMoXCItcmVzaXplXCIpKSB7XHJcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuXHRcdFx0dGhpcy5saW5lSW5mb0F0RHJhZ1N0YXJ0ID0gZ2V0TGluZUluZm9Gcm9tRWxlbWVudChcclxuXHRcdFx0XHR0aGlzLnZpZXcsXHJcblx0XHRcdFx0aW1nRWxlbWVudFxyXG5cdFx0XHQpO1xyXG5cclxuXHRcdFx0aWYgKHRoaXMubGluZUluZm9BdERyYWdTdGFydCkge1xyXG5cdFx0XHRcdGNvbnN0IHsgbGluZVRleHQsIGxpbmVGcm9tIH0gPSB0aGlzLmxpbmVJbmZvQXREcmFnU3RhcnQ7XHJcblx0XHRcdFx0Y29uc3QgcGFyc2VkSW5mbyA9IHBhcnNlSW1hZ2VTeW50YXhGcm9tTGluZShsaW5lVGV4dCk7IC8vIFx1N0VERlx1NEUwMFx1OEMwM1x1NzUyOFx1ODlFM1x1Njc5MFxyXG5cclxuXHRcdFx0XHRpZiAocGFyc2VkSW5mbykge1xyXG5cdFx0XHRcdFx0dGhpcy5kcmFnZ2VkSW1hZ2VJbmZvID0ge1xyXG5cdFx0XHRcdFx0XHQvLyBcdTUyMURcdTU5Q0JcdTUzMTYgZHJhZ2dlZEltYWdlSW5mb1xyXG5cdFx0XHRcdFx0XHRwYXRoOiBwYXJzZWRJbmZvLnBhdGgsXHJcblx0XHRcdFx0XHRcdGFsdFRleHQ6IHBhcnNlZEluZm8uYWx0VGV4dCxcclxuXHRcdFx0XHRcdFx0c291cmNlV2lkdGg6IHBhcnNlZEluZm8uc3BlY2lmaWVkV2lkdGgsXHJcblx0XHRcdFx0XHRcdHNvdXJjZUhlaWdodDogcGFyc2VkSW5mby5zcGVjaWZpZWRIZWlnaHQsXHJcblx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXHJcblx0XHRcdFx0XHRcdGBcdTU2RkVcdTcyNDdcdTYyRDZcdTYyRkRcdTUxQzZcdTU5MDc6IFBhdGg9XCIke1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMuZHJhZ2dlZEltYWdlSW5mby5wYXRoXHJcblx0XHRcdFx0XHRcdH1cIiwgVHlwZT0ke3BhcnNlZEluZm8uaXNIdG1sID8gXCJIVE1MXCIgOiBcIk1EL1dpa2lcIn0sIFc9JHtcclxuXHRcdFx0XHRcdFx0XHRwYXJzZWRJbmZvLnNwZWNpZmllZFdpZHRoXHJcblx0XHRcdFx0XHRcdH0sIEg9JHtwYXJzZWRJbmZvLnNwZWNpZmllZEhlaWdodH0sIFpvb209JHtcclxuXHRcdFx0XHRcdFx0XHRwYXJzZWRJbmZvLmN1cnJlbnRab29tUGVyY2VudFxyXG5cdFx0XHRcdFx0XHR9YFxyXG5cdFx0XHRcdFx0KTtcclxuXHJcblx0XHRcdFx0XHQvLyBcdThCQkVcdTdGNkVcdTYyRDZcdTYyRkRcdTcwNzVcdTY1NEZcdTVFQTZcdTc2RjhcdTUxNzNcdTc2ODQgaW5pdGlhbEltYWdlV2lkdGhcclxuXHRcdFx0XHRcdGlmIChwYXJzZWRJbmZvLnNwZWNpZmllZFdpZHRoKSB7XHJcblx0XHRcdFx0XHRcdHRoaXMuaW5pdGlhbEltYWdlV2lkdGggPSBwYXJzZWRJbmZvLnNwZWNpZmllZFdpZHRoO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0dGhpcy5pbml0aWFsSW1hZ2VXaWR0aCA9IGltZ0VsZW1lbnQub2Zmc2V0V2lkdGg7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZiAoIXRoaXMuaW5pdGlhbEltYWdlV2lkdGggfHwgdGhpcy5pbml0aWFsSW1hZ2VXaWR0aCA8PSAwKVxyXG5cdFx0XHRcdFx0XHR0aGlzLmluaXRpYWxJbWFnZVdpZHRoID0gMjAwO1xyXG5cclxuXHRcdFx0XHRcdC8vIFx1NTZGRVx1NzI0N1x1NEUyRFx1NUZDM1x1NzBCOVx1NTQ4Q1x1NTIxRFx1NTlDQlx1OUYyMFx1NjgwN1x1OERERFx1NzlCQlx1OEJBMVx1N0I5NyAoXHU5MDNCXHU4RjkxXHU0RTBEXHU1M0Q4KVxyXG5cdFx0XHRcdFx0Y29uc3QgcmVjdCA9IGltZ0VsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblx0XHRcdFx0XHR0aGlzLmltYWdlQ2VudGVyWCA9IHJlY3QubGVmdCArIHJlY3Qud2lkdGggLyAyO1xyXG5cdFx0XHRcdFx0dGhpcy5pbWFnZUNlbnRlclkgPSByZWN0LnRvcCArIHJlY3QuaGVpZ2h0IC8gMjtcclxuXHRcdFx0XHRcdHRoaXMuZHJhZ1N0YXJ0WCA9IGV2ZW50LmNsaWVudFg7XHJcblx0XHRcdFx0XHR0aGlzLmRyYWdTdGFydFkgPSBldmVudC5jbGllbnRZO1xyXG5cdFx0XHRcdFx0Y29uc3QgaW5pdGlhbER4VG9DZW50ZXIgPSBldmVudC5jbGllbnRYIC0gdGhpcy5pbWFnZUNlbnRlclg7XHJcblx0XHRcdFx0XHRjb25zdCBpbml0aWFsRHlUb0NlbnRlciA9IGV2ZW50LmNsaWVudFkgLSB0aGlzLmltYWdlQ2VudGVyWTtcclxuXHRcdFx0XHRcdHRoaXMuaW5pdGlhbERpc3RhbmNlVG9DZW50ZXIgPSBNYXRoLnNxcnQoXHJcblx0XHRcdFx0XHRcdGluaXRpYWxEeFRvQ2VudGVyICogaW5pdGlhbER4VG9DZW50ZXIgK1xyXG5cdFx0XHRcdFx0XHRcdGluaXRpYWxEeVRvQ2VudGVyICogaW5pdGlhbER5VG9DZW50ZXJcclxuXHRcdFx0XHRcdCk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gXHU2ODM5XHU2MzZFXHU4OUUzXHU2NzkwXHU3QzdCXHU1NzhCXHU1MUIzXHU1QjlBXHU4ODRDXHU0RTNBXHJcblx0XHRcdFx0XHRpZiAocGFyc2VkSW5mby5pc0h0bWwpIHtcclxuXHRcdFx0XHRcdFx0Ly8gXHU1OTgyXHU2NzlDXHU2NjJGSFRNTFx1RkYwQ1x1NzZGNFx1NjNBNVx1NEY3Rlx1NzUyOFx1ODlFM1x1Njc5MFx1NTFGQVx1NzY4NHpvb21cdUZGMDhcdTYyMTZcdTlFRDhcdThCQTQxMDAlXHVGRjA5XHVGRjBDXHU0RTBEXHU5NzAwXHU4OTgxXHU4RjZDXHU2MzYybWFya2Rvd25cclxuXHRcdFx0XHRcdFx0dGhpcy5jdXJyZW50Wm9vbVBlcmNlbnQgPVxyXG5cdFx0XHRcdFx0XHRcdHBhcnNlZEluZm8uY3VycmVudFpvb21QZXJjZW50ICE9PSB1bmRlZmluZWRcclxuXHRcdFx0XHRcdFx0XHRcdD8gcGFyc2VkSW5mby5jdXJyZW50Wm9vbVBlcmNlbnRcclxuXHRcdFx0XHRcdFx0XHRcdDogMTAwO1xyXG5cdFx0XHRcdFx0XHQvLyBkcmFnZ2VkSW1hZ2VJbmZvIFx1NEUyRFx1NzY4NCBzb3VyY2VXaWR0aC9IZWlnaHQgXHU1REYyXHU0RUNFIHBhcnNlZEluZm8gXHU4QkJFXHU3RjZFXHVGRjBDXHU2NUUwXHU5NzAwXHU1MThEXHU0RUNFIHN0eWxlIFx1ODlFM1x1Njc5MFxyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhcclxuXHRcdFx0XHRcdFx0XHRgXHU1OTA0XHU3NDA2XHU3M0IwXHU2NzA5SFRNTDogWm9vbT0ke3RoaXMuY3VycmVudFpvb21QZXJjZW50fSUsIFx1N0VFN1x1NjI3Rlx1NUMzQVx1NUJGOCBXPSR7dGhpcy5kcmFnZ2VkSW1hZ2VJbmZvLnNvdXJjZVdpZHRofSwgSD0ke3RoaXMuZHJhZ2dlZEltYWdlSW5mby5zb3VyY2VIZWlnaHR9YFxyXG5cdFx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0Ly8gTWFya2Rvd24gXHU2MjE2IFdpa2lsaW5rXHVGRjBDXHU5NzAwXHU4OTgxXHU4RjZDXHU2MzYyXHU0RTNBSFRNTFxyXG5cdFx0XHRcdFx0XHR0aGlzLmN1cnJlbnRab29tUGVyY2VudCA9IDEwMDsgLy8gXHU2NUIwXHU4RjZDXHU2MzYyXHU3Njg0SFRNTFx1RkYwQ3pvb21cdTRFQ0UxMDAlXHU1RjAwXHU1OUNCXHJcblxyXG5cdFx0XHRcdFx0XHRsZXQgc3R5bGVTdHJpbmcgPSBcIlwiO1xyXG5cdFx0XHRcdFx0XHRpZiAodGhpcy5kcmFnZ2VkSW1hZ2VJbmZvLnNvdXJjZVdpZHRoKVxyXG5cdFx0XHRcdFx0XHRcdHN0eWxlU3RyaW5nICs9IGB3aWR0aDogJHt0aGlzLmRyYWdnZWRJbWFnZUluZm8uc291cmNlV2lkdGh9cHg7IGA7XHJcblx0XHRcdFx0XHRcdGlmICh0aGlzLmRyYWdnZWRJbWFnZUluZm8uc291cmNlSGVpZ2h0KVxyXG5cdFx0XHRcdFx0XHRcdHN0eWxlU3RyaW5nICs9IGBoZWlnaHQ6ICR7dGhpcy5kcmFnZ2VkSW1hZ2VJbmZvLnNvdXJjZUhlaWdodH1weDsgYDtcclxuXHRcdFx0XHRcdFx0c3R5bGVTdHJpbmcgKz0gYHpvb206ICR7dGhpcy5jdXJyZW50Wm9vbVBlcmNlbnR9JTtgO1xyXG5cclxuXHRcdFx0XHRcdFx0Y29uc3Qgc2FmZUFsdFRleHQgPSB0aGlzLmRyYWdnZWRJbWFnZUluZm8uYWx0VGV4dFxyXG5cdFx0XHRcdFx0XHRcdD8gZXNjYXBlSHRtbCh0aGlzLmRyYWdnZWRJbWFnZUluZm8uYWx0VGV4dClcclxuXHRcdFx0XHRcdFx0XHQ6IFwiXCI7XHJcblx0XHRcdFx0XHRcdGNvbnN0IG5ld0ltZ1RhZyA9IGA8aW1nIHNyYz1cIiR7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5kcmFnZ2VkSW1hZ2VJbmZvLnBhdGhcclxuXHRcdFx0XHRcdFx0fVwiIGFsdD1cIiR7c2FmZUFsdFRleHR9XCIgc3R5bGU9XCIke3N0eWxlU3RyaW5nLnRyaW0oKX1cIj5gO1xyXG5cclxuXHRcdFx0XHRcdFx0Y29uc3QgZnJvbSA9IGxpbmVGcm9tICsgcGFyc2VkSW5mby5zdGFydEluZGV4SW5MaW5lO1xyXG5cdFx0XHRcdFx0XHRjb25zdCB0byA9IGZyb20gKyBwYXJzZWRJbmZvLm9yaWdpbmFsTWF0Y2gubGVuZ3RoO1xyXG5cclxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXHJcblx0XHRcdFx0XHRcdFx0YFx1OEY2Q1x1NjM2Mk1EL1dpa2lcdTRFM0FIVE1MOiBcdTRFQ0UgXCIke3BhcnNlZEluZm8ub3JpZ2luYWxNYXRjaH1cIiBcdTUyMzAgXCIke25ld0ltZ1RhZ31cImBcclxuXHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdFx0Y29uc3QgdHIgPSB0aGlzLnZpZXcuc3RhdGUudXBkYXRlKHtcclxuXHRcdFx0XHRcdFx0XHRjaGFuZ2VzOiB7IGZyb20sIHRvLCBpbnNlcnQ6IG5ld0ltZ1RhZyB9LFxyXG5cdFx0XHRcdFx0XHRcdHNlbGVjdGlvbjoge1xyXG5cdFx0XHRcdFx0XHRcdFx0YW5jaG9yOiB0aGlzLnZpZXcuc3RhdGUuc2VsZWN0aW9uLm1haW4uaGVhZCxcclxuXHRcdFx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0XHRcdHVzZXJFdmVudDogXCJpbWFnZS5yZXNpemUuY29udmVydFwiLFxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0dGhpcy52aWV3LmRpc3BhdGNoKHRyKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Y29uc29sZS53YXJuKFxyXG5cdFx0XHRcdFx0XHRcIk1vdXNlZG93bjogXHU2NUUwXHU2Q0Q1XHU4OUUzXHU2NzkwXHU4ODRDXHU0RTJEXHU3Njg0XHU0RUZCXHU0RjU1XHU1NkZFXHU3MjQ3XHU4QkVEXHU2Q0Q1OlwiLFxyXG5cdFx0XHRcdFx0XHRsaW5lVGV4dFxyXG5cdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdHRoaXMucmVzZXREcmFnU3RhdGUoKTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Y29uc29sZS53YXJuKFwiTW91c2Vkb3duOiBcdTY1RTBcdTZDRDVcdTgzQjdcdTUzRDZcdTU2RkVcdTcyNDdcdTYyNDBcdTU3MjhcdTg4NENcdTc2ODRcdTRGRTFcdTYwNkZcdTMwMDJcIik7XHJcblx0XHRcdFx0dGhpcy5yZXNldERyYWdTdGF0ZSgpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5pc0RyYWdnaW5nID0gdHJ1ZTtcclxuXHRcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcclxuXHRcdFx0XHRcIm1vdXNlbW92ZVwiLFxyXG5cdFx0XHRcdHRoaXMuaGFuZGxlRG9jdW1lbnRNb3VzZU1vdmVXaGlsZURyYWdnaW5nXHJcblx0XHRcdCk7XHJcblx0XHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMuaGFuZGxlRG9jdW1lbnRNb3VzZVVwKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFx1NUY1M1x1OUYyMFx1NjgwN1x1NTcyOFx1NjU3NFx1NEUyQVx1NjU4N1x1Njg2M1x1NEUwQVx1NzlGQlx1NTJBOFx1NjVGNlx1ODlFNlx1NTNEMSAoXHU0RUM1XHU1RjUzIGlzRHJhZ2dpbmcgXHU0RTNBIHRydWUgXHU2NUY2KVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgaGFuZGxlRG9jdW1lbnRNb3VzZU1vdmVXaGlsZURyYWdnaW5nKGV2ZW50OiBNb3VzZUV2ZW50KSB7XHJcblx0XHRpZiAoXHJcblx0XHRcdCF0aGlzLmlzRHJhZ2dpbmcgfHxcclxuXHRcdFx0IXRoaXMubGFzdEhvdmVyZWRJbWcgfHxcclxuXHRcdFx0IXRoaXMubGluZUluZm9BdERyYWdTdGFydCB8fFxyXG5cdFx0XHQhdGhpcy5kcmFnZ2VkSW1hZ2VJbmZvPy5wYXRoXHJcblx0XHQpIHtcclxuXHRcdFx0dGhpcy5yZXNldERyYWdTdGF0ZSgpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG5cdFx0Y29uc3QgY3VycmVudE1vdXNlWCA9IGV2ZW50LmNsaWVudFg7XHJcblx0XHRjb25zdCBjdXJyZW50TW91c2VZID0gZXZlbnQuY2xpZW50WTtcclxuXHJcblx0XHQvLyBcdThCQTFcdTdCOTdcdTVGNTNcdTUyNERcdTlGMjBcdTY4MDdcdTRGNERcdTdGNkVcdTUyMzBcdTU2RkVcdTcyNDdcdTRFMkRcdTVGQzNcdTcwQjlcdTc2ODRcdThERERcdTc5QkJcclxuXHRcdGNvbnN0IGR4VG9DZW50ZXJDdXJyZW50ID0gY3VycmVudE1vdXNlWCAtIHRoaXMuaW1hZ2VDZW50ZXJYO1xyXG5cdFx0Y29uc3QgZHlUb0NlbnRlckN1cnJlbnQgPSBjdXJyZW50TW91c2VZIC0gdGhpcy5pbWFnZUNlbnRlclk7XHJcblx0XHRjb25zdCBjdXJyZW50RGlzdGFuY2VUb0NlbnRlciA9IE1hdGguc3FydChcclxuXHRcdFx0ZHhUb0NlbnRlckN1cnJlbnQgKiBkeFRvQ2VudGVyQ3VycmVudCArXHJcblx0XHRcdFx0ZHlUb0NlbnRlckN1cnJlbnQgKiBkeVRvQ2VudGVyQ3VycmVudFxyXG5cdFx0KTtcclxuXHJcblx0XHQvLyBcdThCQTFcdTdCOTdcdTlGMjBcdTY4MDdcdTUyMzBcdTRFMkRcdTVGQzNcdTcwQjlcdThERERcdTc5QkJcdTc2ODRcdTUzRDhcdTUzMTZcdTkxQ0ZcclxuXHRcdGNvbnN0IGRpc3RhbmNlQ2hhbmdlID1cclxuXHRcdFx0Y3VycmVudERpc3RhbmNlVG9DZW50ZXIgLSB0aGlzLmluaXRpYWxEaXN0YW5jZVRvQ2VudGVyO1xyXG5cclxuXHRcdC8vIFx1NUI5QVx1NEU0OVx1N0YyOVx1NjUzRVx1NzA3NVx1NjU0Rlx1NUVBNlx1RkYxQVx1NkJDRlx1NTBDRlx1N0QyMFx1NzY4NFx1OERERFx1NzlCQlx1NTNEOFx1NTMxNlx1NUJGOVx1NUU5NFx1NTkxQVx1NUMxMVx1NzY3RVx1NTIwNlx1NkJENFx1NzY4NFx1N0YyOVx1NjUzRVxyXG5cdFx0Ly8gXHU0RjhCXHU1OTgyXHVGRjBDem9vbVNlbnNpdGl2aXR5ID0gMC41IFx1ODg2OFx1NzkzQVx1OUYyMFx1NjgwN1x1NTIzMFx1NEUyRFx1NUZDM1x1NzY4NFx1OERERFx1NzlCQlx1NkJDRlx1NjUzOVx1NTNEODFcdTUwQ0ZcdTdEMjBcdUZGMENcdTdGMjlcdTY1M0VcdTUwM0NcdTY1MzlcdTUzRDgwLjUlXHJcblx0XHQvLyBcdTRGNjBcdTUzRUZcdTRFRTVcdThDMDNcdTY1NzRcdThGRDlcdTRFMkFcdTUwM0NcdTY3NjVcdTgzQjdcdTVGOTdcdTY3MUZcdTY3MUJcdTc2ODRcdTYyRDZcdTYyRkRcdTYyNEJcdTYxMUZcclxuXHRcdGNvbnN0IHpvb21TZW5zaXRpdml0eSA9IDAuMjsgLy8gPDwtLS0gXHU4QzAzXHU2NTc0XHU4RkQ5XHU0RTJBXHU1MDNDXHU2NzY1XHU2NTM5XHU1M0Q4XHU3MDc1XHU2NTRGXHU1RUE2XHJcblx0XHRjb25zdCB6b29tRGVsdGEgPSBkaXN0YW5jZUNoYW5nZSAqIHpvb21TZW5zaXRpdml0eTtcclxuXHJcblx0XHRsZXQgbmV3Wm9vbSA9IE1hdGgucm91bmQodGhpcy5jdXJyZW50Wm9vbVBlcmNlbnQgKyB6b29tRGVsdGEpO1xyXG5cdFx0bmV3Wm9vbSA9IE1hdGgubWF4KDEwLCBNYXRoLm1pbihuZXdab29tLCA1MDApKTsgLy8gXHU5NjUwXHU1MjM2XHU3RjI5XHU2NTNFXHU4MzAzXHU1NkY0XHJcblxyXG5cdFx0dGhpcy5sYXN0SG92ZXJlZEltZy5zdHlsZS56b29tID0gYCR7bmV3Wm9vbX0lYDtcclxuXHRcdC8vIFx1NzUyOFx1NEU4RVx1OEMwM1x1OEJENTpcclxuXHRcdC8vIGNvbnNvbGUubG9nKGBJbml0aWFsRGlzdDogJHt0aGlzLmluaXRpYWxEaXN0YW5jZVRvQ2VudGVyLnRvRml4ZWQoMSl9LCBDdXJyZW50RGlzdDogJHtjdXJyZW50RGlzdGFuY2VUb0NlbnRlci50b0ZpeGVkKDEpfSwgRGlzdENoYW5nZTogJHtkaXN0YW5jZUNoYW5nZS50b0ZpeGVkKDEpfSwgWm9vbURlbHRhOiAke3pvb21EZWx0YS50b0ZpeGVkKDEpfSwgTmV3Wm9vbTogJHtuZXdab29tfSVgKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFx1NUY1M1x1OUYyMFx1NjgwN1x1NjMwOVx1OTUyRVx1NTcyOFx1NjU3NFx1NEUyQVx1NjU4N1x1Njg2M1x1NEUwQVx1Njc3RVx1NUYwMFx1NjVGNlx1ODlFNlx1NTNEMSAoXHU0RUM1XHU1RjUzIGlzRHJhZ2dpbmcgXHU0RTNBIHRydWUgXHU2NUY2KVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgaGFuZGxlRG9jdW1lbnRNb3VzZVVwKGV2ZW50OiBNb3VzZUV2ZW50KSB7XHJcblx0XHRpZiAoXHJcblx0XHRcdCF0aGlzLmlzRHJhZ2dpbmcgfHxcclxuXHRcdFx0IXRoaXMubGFzdEhvdmVyZWRJbWcgfHxcclxuXHRcdFx0IXRoaXMubGluZUluZm9BdERyYWdTdGFydCB8fFxyXG5cdFx0XHQhdGhpcy5kcmFnZ2VkSW1hZ2VJbmZvXHJcblx0XHQpIHtcclxuXHRcdFx0Ly8gXHU3ODZFXHU0RkREZHJhZ2dlZEltYWdlSW5mb1x1NUI1OFx1NTcyOFxyXG5cdFx0XHR0aGlzLnJlc2V0RHJhZ1N0YXRlKCk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcblx0XHRjb25zdCBmaW5hbFpvb21NYXRjaCA9IHRoaXMubGFzdEhvdmVyZWRJbWcuc3R5bGUuem9vbS5tYXRjaCgvKFxcZCspLyk7XHJcblx0XHRsZXQgZmluYWxab29tUGVyY2VudCA9IHRoaXMuY3VycmVudFpvb21QZXJjZW50O1xyXG5cdFx0aWYgKGZpbmFsWm9vbU1hdGNoICYmIGZpbmFsWm9vbU1hdGNoWzFdKSB7XHJcblx0XHRcdGZpbmFsWm9vbVBlcmNlbnQgPSBwYXJzZUludChmaW5hbFpvb21NYXRjaFsxXSwgMTApO1xyXG5cdFx0fVxyXG5cdFx0ZmluYWxab29tUGVyY2VudCA9IE1hdGgubWF4KDEwLCBNYXRoLm1pbihmaW5hbFpvb21QZXJjZW50LCA1MDApKTtcclxuXHJcblx0XHRjb25zb2xlLmxvZyhgXHU2MkQ2XHU2MkZEXHU3RUQzXHU2NzVGXHVGRjBDXHU2NzAwXHU3RUM4XHU3RjI5XHU2NTNFOiAke2ZpbmFsWm9vbVBlcmNlbnR9JWApO1xyXG5cclxuXHRcdC8vIFx1Njc4NFx1NUVGQVx1NjcwMFx1N0VDOFx1NzY4NGltZ1x1NjgwN1x1N0I3RVx1RkYwQ1x1NTMwNVx1NTQyQnNvdXJjZVdpZHRoXHU1NDhDc291cmNlSGVpZ2h0XHVGRjA4XHU1OTgyXHU2NzlDXHU1QjU4XHU1NzI4XHVGRjA5XHJcblx0XHRsZXQgZmluYWxTdHlsZVN0cmluZyA9IFwiXCI7XHJcblx0XHRpZiAodGhpcy5kcmFnZ2VkSW1hZ2VJbmZvLnNvdXJjZVdpZHRoKSB7XHJcblx0XHRcdGZpbmFsU3R5bGVTdHJpbmcgKz0gYHdpZHRoOiAke3RoaXMuZHJhZ2dlZEltYWdlSW5mby5zb3VyY2VXaWR0aH1weDsgYDtcclxuXHRcdH1cclxuXHRcdGlmICh0aGlzLmRyYWdnZWRJbWFnZUluZm8uc291cmNlSGVpZ2h0KSB7XHJcblx0XHRcdGZpbmFsU3R5bGVTdHJpbmcgKz0gYGhlaWdodDogJHt0aGlzLmRyYWdnZWRJbWFnZUluZm8uc291cmNlSGVpZ2h0fXB4OyBgO1xyXG5cdFx0fVxyXG5cdFx0ZmluYWxTdHlsZVN0cmluZyArPSBgem9vbTogJHtmaW5hbFpvb21QZXJjZW50fSU7YDtcclxuXHJcblx0XHRjb25zdCBzYWZlQWx0VGV4dEZpbmFsID0gdGhpcy5kcmFnZ2VkSW1hZ2VJbmZvLmFsdFRleHRcclxuXHRcdFx0PyBlc2NhcGVIdG1sKHRoaXMuZHJhZ2dlZEltYWdlSW5mby5hbHRUZXh0KVxyXG5cdFx0XHQ6IFwiXCI7XHJcblx0XHRjb25zdCBuZXdJbWdUYWdGaW5hbCA9IGA8aW1nIHNyYz1cIiR7XHJcblx0XHRcdHRoaXMuZHJhZ2dlZEltYWdlSW5mby5wYXRoXHJcblx0XHR9XCIgYWx0PVwiJHtzYWZlQWx0VGV4dEZpbmFsfVwiIHN0eWxlPVwiJHtmaW5hbFN0eWxlU3RyaW5nLnRyaW0oKX1cIj5gO1xyXG5cclxuXHRcdC8vIFx1NjZGNFx1NjVCMFx1NjU4N1x1Njg2M1x1NEUyRFx1NzY4NFx1NjgwN1x1N0I3RVxyXG5cdFx0Y29uc3QgeyBsaW5lRnJvbSB9ID0gdGhpcy5saW5lSW5mb0F0RHJhZ1N0YXJ0O1xyXG5cdFx0Ly8gXHU4M0I3XHU1M0Q2XHU2NzAwXHU2NUIwXHU3Njg0XHU4ODRDXHU1MTg1XHU1QkI5XHVGRjBDXHU1NkUwXHU0RTNBXHU1NzI4bW91c2Vkb3duXHU2NUY2XHU1M0VGXHU4MEZEXHU1REYyXHU3RUNGXHU4RjZDXHU2MzYyXHU4RkM3XHU0RTAwXHU2QjIxXHJcblx0XHRjb25zdCBjdXJyZW50TGluZUNvbnRlbnQgPSB0aGlzLnZpZXcuc3RhdGUuZG9jLmxpbmVBdChsaW5lRnJvbSkudGV4dDtcclxuXHJcblx0XHQvLyBcdTY2RjRcdTY1QjBcdTZCNjNcdTUyMTlcdTg4NjhcdThGQkVcdTVGMEZcdTRFRTVcdTUxQzZcdTc4NkVcdTYyN0VcdTUyMzBcdTYyMTFcdTRFRUNcdTRFNEJcdTUyNERcdTc1MUZcdTYyMTBcdTYyMTZcdTZCNjNcdTU3MjhcdTY0Q0RcdTRGNUNcdTc2ODRpbWdcdTY4MDdcdTdCN0VcclxuXHRcdC8vIFx1NUI4M1x1NUU5NFx1OEJFNVx1ODBGRFx1NTMzOVx1OTE0RFx1NTIzMCA8aW1nIHNyYz1cInBhdGhcIiAuLi4gc3R5bGU9XCIuLi5cIj4gXHU3RUQzXHU2Nzg0XHJcblx0XHRjb25zdCBpbWdUYWdUb1JlcGxhY2VSZWdleCA9IG5ldyBSZWdFeHAoXHJcblx0XHRcdGA8aW1nXFxcXHMrc3JjPSg/OltcIiddJHtlc2NhcGVSZWdFeHAoXHJcblx0XHRcdFx0dGhpcy5kcmFnZ2VkSW1hZ2VJbmZvLnBhdGghXHJcblx0XHRcdCl9W1wiJ118JHtlc2NhcGVSZWdFeHAodGhpcy5kcmFnZ2VkSW1hZ2VJbmZvLnBhdGghKX0pYCArIC8vIFx1NTMzOVx1OTE0RHNyY1xyXG5cdFx0XHRcdGBbXj5dKj5gLCAvLyBcdTUzMzlcdTkxNERcdTUyMzBcdTY4MDdcdTdCN0VcdTdFRDNcdTY3NUZcclxuXHRcdFx0XCJpXCJcclxuXHRcdCk7XHJcblxyXG5cdFx0Y29uc3QgbWF0Y2hGb3JVcGRhdGUgPSBjdXJyZW50TGluZUNvbnRlbnQubWF0Y2goaW1nVGFnVG9SZXBsYWNlUmVnZXgpO1xyXG5cdFx0bGV0IGZyb21Qb3M6IG51bWJlciB8IHVuZGVmaW5lZCwgdG9Qb3M6IG51bWJlciB8IHVuZGVmaW5lZDtcclxuXHJcblx0XHRpZiAobWF0Y2hGb3JVcGRhdGUgJiYgbWF0Y2hGb3JVcGRhdGUuaW5kZXggIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRmcm9tUG9zID0gbGluZUZyb20gKyBtYXRjaEZvclVwZGF0ZS5pbmRleDtcclxuXHRcdFx0dG9Qb3MgPSBmcm9tUG9zICsgbWF0Y2hGb3JVcGRhdGVbMF0ubGVuZ3RoO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gXHU1OTgyXHU2NzlDXHU0RTBBXHU5NzYyXHU2Q0ExXHU1MzM5XHU5MTREXHU1MjMwXHVGRjBDXHU1M0VGXHU4MEZEXHU2NjJGXHU1NkUwXHU0RTNBXHU1MzlGXHU1OUNCXHU4ODRDXHU2NjJGTWFya2Rvd25cdUZGMENcdTU3Mjhtb3VzZWRvd25cdTY1RjZcdTg4QUJcdTY2RkZcdTYzNjJcdTRFODZcdUZGMENcdTRGNDZsaW5lSW5mb0F0RHJhZ1N0YXJ0LmxpbmVUZXh0XHU1M0VGXHU4MEZEXHU0RUNEXHU2NjJGXHU2NUU3XHU3Njg0XHJcblx0XHRcdC8vIFx1OEZEOVx1NzlDRFx1NjBDNVx1NTFCNVx1NzQwNlx1OEJCQVx1NEUwQVx1NUU5NFx1OEJFNVx1NTcyOCBtb3VzZWRvd24gXHU1NDBFXHU2NkY0XHU2NUIwIGxpbmVJbmZvQXREcmFnU3RhcnQubGluZVRleHQgXHU2MjE2XHU3NTI4XHU2NkY0XHU1M0VGXHU5NzYwXHU3Njg0XHU2NUI5XHU1RjBGXHU1QjlBXHU0RjREXHUzMDAyXHJcblx0XHRcdC8vIFx1NTNFNlx1NEUwMFx1NzlDRFx1NTNFRlx1ODBGRFx1NjYyRiBET00gXHU1NDhDIERvYyBcdTc2ODRcdTU0MENcdTZCNjVcdTk1RUVcdTk4OThcdTMwMDJcclxuXHRcdFx0Ly8gXHU0RjVDXHU0RTNBXHU0RTAwXHU0RTJBXHU1OTA3XHU5MDA5XHVGRjBDXHU1OTgyXHU2NzlDXHU0RTBBXHU5NzYyXHU2MjdFXHU0RTBEXHU1MjMwXHVGRjBDXHU1RTc2XHU0RTE0XHU2MjExXHU0RUVDXHU3N0U1XHU5MDUzXHU1QjgzXHU2NzAwXHU1MjFEXHU2NjJGTUQvV2lraWxpbmtcdUZGMENcdTUzRUZcdTRFRTVcdTVDMURcdThCRDVcdTc1MjhcdTUyMURcdTU5Q0JcdTc2ODRwYXJzZWRJbmZvXHU3Njg0XHU1QjlBXHU0RjREXHU0RkUxXHU2MDZGXHJcblx0XHRcdC8vIFx1NEY0Nlx1OEZEOVx1NEYxQVx1NkJENFx1OEY4M1x1NTkwRFx1Njc0Mlx1RkYwQ1x1NEYxOFx1NTE0OFx1Nzg2RVx1NEZERFx1NEUwQVx1OTc2Mlx1NzY4NFx1NkI2M1x1NTIxOVx1ODBGRFx1NjI3RVx1NTIzMFx1NzUzMVx1NjNEMlx1NEVGNlx1NzUxRlx1NjIxMFx1NzY4NGltZ1x1NjgwN1x1N0I3RVx1MzAwMlxyXG5cdFx0XHRjb25zb2xlLndhcm4oXHJcblx0XHRcdFx0YE1vdXNlVXA6IFx1NjVFMFx1NkNENVx1NTcyOFx1ODg0Q1x1NEUyRFx1NjI3RVx1NTIzMFx1ODk4MVx1NjZGNFx1NjVCMFx1NzY4NCA8aW1nIC8+IFx1NjgwN1x1N0I3RVx1MzAwMlx1ODg0Q1x1NTE4NVx1NUJCOTogXCIke2N1cnJlbnRMaW5lQ29udGVudH1cIiwgXHU2NzFGXHU2NzFCXHU4REVGXHU1Rjg0OiAke3RoaXMuZHJhZ2dlZEltYWdlSW5mby5wYXRofWBcclxuXHRcdFx0KTtcclxuXHRcdFx0Ly8gXHU1QzFEXHU4QkQ1XHU0RjdGXHU3NTI4XHU1MzlGXHU1OUNCXHU3Njg0IG1hcmtkb3duL3dpa2lsaW5rIFx1NTMzOVx1OTE0RFx1NEZFMVx1NjA2Rlx1RkYwOFx1NTk4Mlx1Njc5QyBtb3VzZWRvd24gXHU2NUY2XHU2Q0ExXHU2NzA5XHU2MjEwXHU1MjlGXHU2NkZGXHU2MzYyXHU2MjE2XHU4OEFCXHU2NEE0XHU5NTAwXHVGRjA5XHJcblx0XHRcdC8vIFx1OEZEOVx1NEUwMFx1NkI2NVx1NjYyRlx1NEUzQVx1NEU4Nlx1NTA2NVx1NThFRVx1NjAyN1x1RkYwQ1x1NEY0Nlx1NzQwNlx1NjBGM1x1NjBDNVx1NTFCNVx1NEUwQlx1RkYwQ1x1NEUwQVx1OTc2Mlx1NzY4NFx1NkI2M1x1NTIxOVx1NUU5NFx1OEJFNVx1ODBGRFx1NURFNVx1NEY1Q1xyXG5cdFx0XHRjb25zdCBvcmlnaW5hbFN5bnRheEluZm8gPSBwYXJzZUltYWdlU3ludGF4RnJvbUxpbmUoXHJcblx0XHRcdFx0dGhpcy5saW5lSW5mb0F0RHJhZ1N0YXJ0LmxpbmVUZXh0XHJcblx0XHRcdCk7IC8vIFx1NzUyOFx1NTM5Rlx1NTlDQlx1ODg0Q1x1NjU4N1x1NjcyQ1x1NTE4RFx1ODlFM1x1Njc5MFx1NEUwMFx1NkIyMVxyXG5cdFx0XHRpZiAoXHJcblx0XHRcdFx0b3JpZ2luYWxTeW50YXhJbmZvICYmXHJcblx0XHRcdFx0b3JpZ2luYWxTeW50YXhJbmZvLnBhdGggPT09IHRoaXMuZHJhZ2dlZEltYWdlSW5mby5wYXRoXHJcblx0XHRcdCkge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKFxyXG5cdFx0XHRcdFx0XCJNb3VzZVVwOiBcdTVDMURcdThCRDVcdTRGN0ZcdTc1MjhcdTUzOUZcdTU5Q0JNYXJrZG93bi9XaWtpbGlua1x1NEY0RFx1N0Y2RVx1OEZEQlx1ODg0Q1x1NjZGRlx1NjM2Mlx1MzAwMlwiXHJcblx0XHRcdFx0KTtcclxuXHRcdFx0XHRmcm9tUG9zID0gbGluZUZyb20gKyBvcmlnaW5hbFN5bnRheEluZm8uc3RhcnRJbmRleEluTGluZTtcclxuXHRcdFx0XHR0b1BvcyA9IGZyb21Qb3MgKyBvcmlnaW5hbFN5bnRheEluZm8ub3JpZ2luYWxNYXRjaC5sZW5ndGg7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5yZXNldERyYWdTdGF0ZSgpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChmcm9tUG9zICE9PSB1bmRlZmluZWQgJiYgdG9Qb3MgIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRjb25zdCB0ciA9IHRoaXMudmlldy5zdGF0ZS51cGRhdGUoe1xyXG5cdFx0XHRcdGNoYW5nZXM6IHsgZnJvbTogZnJvbVBvcywgdG86IHRvUG9zLCBpbnNlcnQ6IG5ld0ltZ1RhZ0ZpbmFsIH0sXHJcblx0XHRcdFx0c2VsZWN0aW9uOiB7IGFuY2hvcjogdGhpcy52aWV3LnN0YXRlLnNlbGVjdGlvbi5tYWluLmhlYWQgfSxcclxuXHRcdFx0XHR1c2VyRXZlbnQ6IFwiaW1hZ2UucmVzaXplLnVwZGF0ZVwiLFxyXG5cdFx0XHR9KTtcclxuXHRcdFx0dGhpcy52aWV3LmRpc3BhdGNoKHRyKTtcclxuXHRcdFx0Y29uc29sZS5sb2coXHJcblx0XHRcdFx0YFx1NTZGRVx1NzI0NyBcIiR7XHJcblx0XHRcdFx0XHR0aGlzLmRyYWdnZWRJbWFnZUluZm8ucGF0aFxyXG5cdFx0XHRcdH1cIiBcdTY4MzdcdTVGMEZcdTVERjJcdTY2RjRcdTY1QjA6ICR7ZmluYWxTdHlsZVN0cmluZy50cmltKCl9YFxyXG5cdFx0XHQpO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5yZXNldERyYWdTdGF0ZSgpO1xyXG5cdH1cclxufVxyXG5cclxuLy8gXHU4Rjg1XHU1MkE5XHU1MUZEXHU2NTcwOiBcdThGNkNcdTRFNDlIVE1MXHU3Mjc5XHU2QjhBXHU1QjU3XHU3QjI2IChcdTc1MjhcdTRFOEVhbHRcdTVDNUVcdTYwMjcpXHJcbmZ1bmN0aW9uIGVzY2FwZUh0bWwodW5zYWZlOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdHJldHVybiB1bnNhZmVcclxuXHRcdC5yZXBsYWNlKC8mL2csIFwiJmFtcDtcIilcclxuXHRcdC5yZXBsYWNlKC88L2csIFwiJmx0O1wiKVxyXG5cdFx0LnJlcGxhY2UoLz4vZywgXCImZ3Q7XCIpXHJcblx0XHQucmVwbGFjZSgvXCIvZywgXCImcXVvdDtcIilcclxuXHRcdC5yZXBsYWNlKC8nL2csIFwiJiMwMzk7XCIpO1xyXG59XHJcblxyXG4vLyBcdThGODVcdTUyQTlcdTUxRkRcdTY1NzA6IFx1OEY2Q1x1NEU0OVx1NkI2M1x1NTIxOVx1ODg2OFx1OEZCRVx1NUYwRlx1NzI3OVx1NkI4QVx1NUI1N1x1N0IyNlxyXG5mdW5jdGlvbiBlc2NhcGVSZWdFeHAoc3RyaW5nOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdHJldHVybiBzdHJpbmcucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csIFwiXFxcXCQmXCIpO1xyXG59XHJcbiIsICIvKipcclxuICogXHU0RUNFXHU3RUQ5XHU1QjlBXHU3Njg0XHU2NTg3XHU2NzJDXHU0RTJEXHU2M0QwXHU1M0Q2XHU3QjJDXHU0RTAwXHU0RTJBXHU2MjdFXHU1MjMwXHU3Njg0XHU1NkZFXHU3MjQ3XHU5NEZFXHU2M0E1XHU3Njg0XHU4REVGXHU1Rjg0XHUzMDAyXHJcbiAqIFx1NjUyRlx1NjMwMSBNYXJrZG93biBcdTY4M0NcdTVGMEYgYCFbYWx0XShwYXRoKWAgXHU1NDhDIFdpa2lsaW5rIFx1NjgzQ1x1NUYwRiBgIVtbcGF0aF1dYCBcdTYyMTYgYCFbW3BhdGh8YWxpYXNdXWBcdTMwMDJcclxuICogQHBhcmFtIHRleHRMaW5lIFx1NTMwNVx1NTQyQlx1NTZGRVx1NzI0N1x1OTRGRVx1NjNBNVx1NzY4NFx1NjU4N1x1NjcyQ1x1ODg0Q1x1NjIxNlx1NUI1N1x1N0IyNlx1NEUzMlx1NzI0N1x1NkJCNVx1MzAwMlxyXG4gKiBAcmV0dXJucyBcdTU5ODJcdTY3OUNcdTYyN0VcdTUyMzBcdTU2RkVcdTcyNDdcdThERUZcdTVGODRcdUZGMENcdTUyMTlcdThGRDRcdTU2REVcdThCRTVcdThERUZcdTVGODRcdTVCNTdcdTdCMjZcdTRFMzJcdUZGMUJcdTU0MjZcdTUyMTlcdThGRDRcdTU2REUgbnVsbFx1MzAwMlxyXG4gKi9cclxuLyoqXHJcbiAqIFx1NEVDRVx1NjU4N1x1NjcyQ1x1ODg0Q1x1NEUyRFx1NjNEMFx1NTNENlx1N0IyQ1x1NEUwMFx1NEUyQVx1NTNFRlx1OEJDNlx1NTIyQlx1NzY4NFx1NTZGRVx1NzI0N1x1OERFRlx1NUY4NFx1MzAwMlxyXG4gKiBcdTRGMThcdTUxNDhcdTUzMzlcdTkxNEQgSFRNTCA8aW1nPiBcdTY4MDdcdTdCN0VcdUZGMENcdTcxMzZcdTU0MEVcdTY2MkYgTWFya2Rvd25cdUZGMENcdTY3MDBcdTU0MEVcdTY2MkYgV2lraWxpbmtcdTMwMDJcclxuICogQHBhcmFtIHRleHRMaW5lIFx1NTMwNVx1NTQyQlx1NTZGRVx1NzI0N1x1OEJFRFx1NkNENVx1NzY4NFx1NjU4N1x1NjcyQ1x1ODg0Q1xyXG4gKiBAcmV0dXJucyBcdTU2RkVcdTcyNDdcdThERUZcdTVGODRcdTVCNTdcdTdCMjZcdTRFMzJcdUZGMENcdTU5ODJcdTY3OUNcdTY3MkFcdTYyN0VcdTUyMzBcdTUyMTlcdTRFM0EgbnVsbFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RGaXJzdEltYWdlUGF0aCh0ZXh0TGluZTogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XHJcblx0aWYgKCF0ZXh0TGluZSkge1xyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fVxyXG5cclxuXHQvLyAxLiBcdTVDMURcdThCRDVcdTUzMzlcdTkxNEQgSFRNTCA8aW1nPiBcdTY4MDdcdTdCN0UgKFx1NTMwNVx1NjJFQ1x1NjcwOVx1NjVFMCBzdHlsZSBcdTc2ODRcdTYwQzVcdTUxQjUpXHJcblx0Ly8gICAgLSBzcmM9XCJwYXRoXCJcclxuXHQvLyAgICAtIHNyYz0ncGF0aCdcclxuXHQvLyAgICAtIHNyYz1wYXRoIChcdTY1RTBcdTVGMTVcdTUzRjdcdUZGMENcdThGODNcdTVDMTFcdTg5QzFcdTRGNDZcdTYyODBcdTY3MkZcdTRFMEFcdTUzRUZcdTgwRkQpXHJcblx0Y29uc3QgaHRtbFJlZ2V4ID0gLzxpbWdcXHNbXj5dKnNyYz0oPzpbXCInXShbXlwiJ10rKVtcIiddfChbXj5cXHNdKykpL2k7XHJcblx0bGV0IG1hdGNoID0gdGV4dExpbmUubWF0Y2goaHRtbFJlZ2V4KTtcclxuXHRpZiAobWF0Y2ggJiYgKG1hdGNoWzFdIHx8IG1hdGNoWzJdKSkge1xyXG5cdFx0cmV0dXJuIChtYXRjaFsxXSB8fCBtYXRjaFsyXSkudHJpbSgpO1xyXG5cdH1cclxuXHJcblx0Ly8gMi4gXHU1QzFEXHU4QkQ1XHU1MzM5XHU5MTREIE1hcmtkb3duIFx1OThDRVx1NjgzQ1x1OTRGRVx1NjNBNSBgIVtdKHBhdGgpYCBcdTYyMTYgYCFbYWx0XShwYXRoIFwidGl0bGVcIilgXHJcblx0Y29uc3QgbWFya2Rvd25SZWdleCA9IC8hXFxbW15cXF1dKlxcXVxcKChbXilcXHNdKykoPzpcXHNbXildKik/XFwpLztcclxuXHRtYXRjaCA9IHRleHRMaW5lLm1hdGNoKG1hcmtkb3duUmVnZXgpO1xyXG5cdGlmIChtYXRjaCAmJiBtYXRjaFsxXSkge1xyXG5cdFx0cmV0dXJuIG1hdGNoWzFdLnRyaW0oKTtcclxuXHR9XHJcblxyXG5cdC8vIDMuIFx1NUMxRFx1OEJENVx1NTMzOVx1OTE0RCBXaWtpbGluayBcdTk4Q0VcdTY4M0NcdTk0RkVcdTYzQTUgYCFbW3BhdGhdXWAgXHU2MjE2IGAhW1twYXRofGFsaWFzXV1gXHJcblx0Y29uc3Qgd2lraWxpbmtSZWdleCA9IC8hXFxbXFxbKFtefFxcXV0rKSg/OlxcfFteXFxdXSopP1xcXVxcXS87XHJcblx0bWF0Y2ggPSB0ZXh0TGluZS5tYXRjaCh3aWtpbGlua1JlZ2V4KTtcclxuXHRpZiAobWF0Y2ggJiYgbWF0Y2hbMV0pIHtcclxuXHRcdHJldHVybiBtYXRjaFsxXS50cmltKCk7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gbnVsbDtcclxufVxyXG5cclxuaW50ZXJmYWNlIFBhcnNlZEltYWdlSW5mbyB7XHJcblx0cGF0aDogc3RyaW5nO1xyXG5cdGFsdFRleHQ/OiBzdHJpbmc7XHJcblx0c3BlY2lmaWVkV2lkdGg/OiBudW1iZXI7XHJcblx0c3BlY2lmaWVkSGVpZ2h0PzogbnVtYmVyO1xyXG5cdG9yaWdpbmFsTWF0Y2g6IHN0cmluZzsgLy8gXHU1QjhDXHU2NTc0XHU1MzM5XHU5MTREXHU1MjMwXHU3Njg0XHU1MzlGXHU1OUNCTWFya2Rvd24vV2lraWxpbmtcdTVCNTdcdTdCMjZcdTRFMzJcclxuXHRzdGFydEluZGV4SW5MaW5lOiBudW1iZXI7IC8vIFx1NTM5Rlx1NTlDQlx1NTMzOVx1OTE0RFx1NTcyOFx1ODg0Q1x1NjU4N1x1NjcyQ1x1NEUyRFx1NzY4NFx1OEQ3N1x1NTlDQlx1N0QyMlx1NUYxNVxyXG5cdGlzSHRtbDogYm9vbGVhbjtcclxuXHRjdXJyZW50Wm9vbVBlcmNlbnQ/OiBudW1iZXI7IC8vIFx1NUY1M1x1NTI0RFx1N0YyOVx1NjUzRVx1NzY3RVx1NTIwNlx1NkJENFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VJbWFnZVN5bnRheEZyb21MaW5lKFxyXG5cdGxpbmVUZXh0OiBzdHJpbmdcclxuKTogUGFyc2VkSW1hZ2VJbmZvIHwgbnVsbCB7XHJcblx0Ly8gXHU0RjE4XHU1MTQ4XHU1MzM5XHU5MTREIE1hcmtkb3duOiAhW2FsdHxXeEhdKHBhdGgpIFx1NjIxNiAhW2FsdF0ocGF0aCkgXHU2MjE2ICFbfFd4SF0ocGF0aClcclxuXHQvLyBcdTdFQzQxOiBBbHQgVGV4dCAoXHU1M0VGXHU0RUU1XHU1MzA1XHU1NDJCXHU3QTdBXHU2ODNDXHVGRjBDXHU0RjQ2XHU0RTBEXHU4MEZEXHU1MzA1XHU1NDJCICddJylcclxuXHQvLyBcdTdFQzQyOiBcdTdCQTFcdTkwNTNcdTdCMjZcdTU0OENcdTVDM0FcdTVCRjggfFd4SCAoXHU1M0VGXHU5MDA5KVxyXG5cdC8vIFx1N0VDNDM6IFx1NUMzQVx1NUJGOCBXeEggXHU2MjE2IFcgKFx1NTk4Mlx1Njc5Q1x1N0VDNDJcdTVCNThcdTU3MjgpXHJcblx0Ly8gXHU3RUM0NDogXHU4REVGXHU1Rjg0XHJcblx0Y29uc3QgbWFya2Rvd25SZWdleCA9IC8hXFxbKC4qPyk/KD86XFx8KFxcZCsoPzp4XFxkKyk/KSk/XFxdXFwoKFteKV0rKVxcKS87XHJcblx0bGV0IG1hdGNoID0gbGluZVRleHQubWF0Y2gobWFya2Rvd25SZWdleCk7XHJcblxyXG5cdGlmIChtYXRjaCkge1xyXG5cdFx0Y29uc3QgYWx0VGV4dCA9IG1hdGNoWzFdIHx8IHVuZGVmaW5lZDsgLy8gT2JzaWRpYW4gXHU3Njg0IGFsdCBcdTUzRUZcdTgwRkQgIFx1NjYyRlx1N0E3QVx1NzY4NFxyXG5cdFx0Y29uc3QgZGltZW5zaW9uc1N0cmluZyA9IG1hdGNoWzJdOyAvLyBcdTRGOEJcdTU5ODIgXCIxMDB4MjAwXCIgXHU2MjE2IFwiMTAwXCJcclxuXHRcdGNvbnN0IHBhdGggPSBtYXRjaFszXS50cmltKCk7XHJcblx0XHRsZXQgc3BlY2lmaWVkV2lkdGg6IG51bWJlciB8IHVuZGVmaW5lZDtcclxuXHRcdGxldCBzcGVjaWZpZWRIZWlnaHQ6IG51bWJlciB8IHVuZGVmaW5lZDtcclxuXHJcblx0XHRpZiAoZGltZW5zaW9uc1N0cmluZykge1xyXG5cdFx0XHRjb25zdCBkaW1zID0gZGltZW5zaW9uc1N0cmluZy5zcGxpdChcInhcIik7XHJcblx0XHRcdGlmIChkaW1zWzBdKSB7XHJcblx0XHRcdFx0c3BlY2lmaWVkV2lkdGggPSBwYXJzZUludChkaW1zWzBdLCAxMCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKGRpbXMubGVuZ3RoID4gMSAmJiBkaW1zWzFdKSB7XHJcblx0XHRcdFx0c3BlY2lmaWVkSGVpZ2h0ID0gcGFyc2VJbnQoZGltc1sxXSwgMTApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRwYXRoLFxyXG5cdFx0XHRhbHRUZXh0LFxyXG5cdFx0XHRzcGVjaWZpZWRXaWR0aCxcclxuXHRcdFx0c3BlY2lmaWVkSGVpZ2h0LFxyXG5cdFx0XHRvcmlnaW5hbE1hdGNoOiBtYXRjaFswXSxcclxuXHRcdFx0c3RhcnRJbmRleEluTGluZTogbWF0Y2guaW5kZXggPz8gMCxcclxuXHRcdFx0aXNIdG1sOiBmYWxzZSxcclxuXHRcdH07XHJcblx0fVxyXG5cclxuXHQvLyBcdTUzMzlcdTkxNEQgV2lraWxpbms6ICFbW3BhdGh8V3hIXV0gXHU2MjE2ICFbW3BhdGh8V11dIFx1NjIxNiAhW1twYXRofGFsdF1dIFx1NjIxNiAhW1twYXRoXV1cclxuXHQvLyBcdTdFQzQxOiBcdThERUZcdTVGODRcclxuXHQvLyBcdTdFQzQyOiBcdTdCQTFcdTkwNTNcdTdCMjZcdTU0MEVcdTc2ODRcdTUxODVcdTVCQjkgKGFsdCBcdTYyMTYgV3hIIFx1NjIxNiBXKSAoXHU1M0VGXHU5MDA5KVxyXG5cdGNvbnN0IHdpa2lsaW5rUmVnZXggPSAvIVxcW1xcWyhbXnxcXF1dKykoPzpcXHwoW158XFxdXSopKT9cXF1cXF0vO1xyXG5cdG1hdGNoID0gbGluZVRleHQubWF0Y2god2lraWxpbmtSZWdleCk7XHJcblx0aWYgKG1hdGNoKSB7XHJcblx0XHRjb25zdCBwYXRoID0gbWF0Y2hbMV0udHJpbSgpO1xyXG5cdFx0Y29uc3QgYWx0T3JEaW1lbnNpb25zID0gbWF0Y2hbMl07IC8vIFx1NTNFRlx1ODBGRFx1NEUzQSB1bmRlZmluZWQsIFwiYWx0IHRleHRcIiwgXCIxMDBcIiwgXCIxMDB4MjAwXCJcclxuXHRcdGxldCBzcGVjaWZpZWRXaWR0aDogbnVtYmVyIHwgdW5kZWZpbmVkO1xyXG5cdFx0bGV0IHNwZWNpZmllZEhlaWdodDogbnVtYmVyIHwgdW5kZWZpbmVkO1xyXG5cdFx0bGV0IGFsdFRleHQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IGFsdE9yRGltZW5zaW9uczsgLy8gXHU5RUQ4XHU4QkE0XHU0RTNBIGFsdCB0ZXh0XHJcblxyXG5cdFx0aWYgKGFsdE9yRGltZW5zaW9ucykge1xyXG5cdFx0XHRjb25zdCBkaW1NYXRjaCA9IGFsdE9yRGltZW5zaW9ucy5tYXRjaCgvXihcXGQrKSg/OngoXFxkKykpPyQvKTsgLy8gXHU0RTI1XHU2ODNDXHU1MzM5XHU5MTREIFd4SCBcdTYyMTYgV1xyXG5cdFx0XHRpZiAoZGltTWF0Y2gpIHtcclxuXHRcdFx0XHQvLyBcdTY2MkZcdTVDM0FcdTVCRjhcdTVCNTdcdTdCMjZcdTRFMzJcclxuXHRcdFx0XHRpZiAoZGltTWF0Y2hbMV0pIHtcclxuXHRcdFx0XHRcdHNwZWNpZmllZFdpZHRoID0gcGFyc2VJbnQoZGltTWF0Y2hbMV0sIDEwKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKGRpbU1hdGNoWzJdKSB7XHJcblx0XHRcdFx0XHRzcGVjaWZpZWRIZWlnaHQgPSBwYXJzZUludChkaW1NYXRjaFsyXSwgMTApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRhbHRUZXh0ID0gdW5kZWZpbmVkOyAvLyBcdTU5ODJcdTY3OUNcdTY2MkZcdTVDM0FcdTVCRjhcdUZGMENcdTUyMTlcdTVCODNcdTRFMERcdTY2MkYgYWx0IHRleHRcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0cGF0aCxcclxuXHRcdFx0YWx0VGV4dCxcclxuXHRcdFx0c3BlY2lmaWVkV2lkdGgsXHJcblx0XHRcdHNwZWNpZmllZEhlaWdodCxcclxuXHRcdFx0b3JpZ2luYWxNYXRjaDogbWF0Y2hbMF0sXHJcblx0XHRcdHN0YXJ0SW5kZXhJbkxpbmU6IG1hdGNoLmluZGV4ID8/IDAsXHJcblx0XHRcdGlzSHRtbDogZmFsc2UsXHJcblx0XHR9O1xyXG5cdH1cclxuXHJcblx0Y29uc3QgaHRtbEltZ1JlZ2V4ID1cclxuXHRcdC8oPGltZ1xccysoPzpbXj5dKj9cXHMrKT9zcmM9KD86W1wiJ10oW15cIiddKylbXCInXXwoW14+XFxzXSspKSg/OlxccytbXj5dKj9cXHMqYWx0PSg/OltcIiddKFteXCInXSopW1wiJ118KFtePlxcc10qKSkpPyg/OlxccytbXj5dKj9cXHMqc3R5bGU9KD86W1wiJ10oW15cIiddKylbXCInXXwoW14+XFxzXSspKSk/W14+XSo/PikvaTtcclxuXHRjb25zdCBodG1sTWF0Y2ggPSBsaW5lVGV4dC5tYXRjaChodG1sSW1nUmVnZXgpO1xyXG5cclxuXHRpZiAoaHRtbE1hdGNoKSB7XHJcblx0XHRjb25zdCBvcmlnaW5hbEh0bWxUYWcgPSBodG1sTWF0Y2hbMF07IC8vIFx1NjU3NFx1NEUyQVx1NTMzOVx1OTE0RFx1NTIzMFx1NzY4NCA8aW1nPiBcdTY4MDdcdTdCN0VcclxuXHRcdGNvbnN0IHBhdGggPSBodG1sTWF0Y2hbMl0gfHwgaHRtbE1hdGNoWzNdOyAvLyBzcmMgXHU1MDNDXHJcblx0XHRjb25zdCBhbHRUZXh0ID0gaHRtbE1hdGNoWzRdIHx8IGh0bWxNYXRjaFs1XSB8fCB1bmRlZmluZWQ7IC8vIGFsdCBcdTUwM0NcclxuXHRcdGNvbnN0IHN0eWxlU3RyaW5nID0gaHRtbE1hdGNoWzZdIHx8IGh0bWxNYXRjaFs3XSB8fCB1bmRlZmluZWQ7IC8vIHN0eWxlIFx1NUM1RVx1NjAyN1x1NTE4NVx1NUJCOVxyXG5cclxuXHRcdGxldCBzcGVjaWZpZWRXaWR0aDogbnVtYmVyIHwgdW5kZWZpbmVkO1xyXG5cdFx0bGV0IHNwZWNpZmllZEhlaWdodDogbnVtYmVyIHwgdW5kZWZpbmVkO1xyXG5cdFx0bGV0IGN1cnJlbnRab29tUDogbnVtYmVyIHwgdW5kZWZpbmVkO1xyXG5cclxuXHRcdGlmIChzdHlsZVN0cmluZykge1xyXG5cdFx0XHRjb25zdCB3aWR0aE1hdGNoID0gc3R5bGVTdHJpbmcubWF0Y2goL3dpZHRoOlxccyooXFxkKylweC9pKTtcclxuXHRcdFx0aWYgKHdpZHRoTWF0Y2ggJiYgd2lkdGhNYXRjaFsxXSkge1xyXG5cdFx0XHRcdHNwZWNpZmllZFdpZHRoID0gcGFyc2VJbnQod2lkdGhNYXRjaFsxXSwgMTApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRjb25zdCBoZWlnaHRNYXRjaCA9IHN0eWxlU3RyaW5nLm1hdGNoKC9oZWlnaHQ6XFxzKihcXGQrKXB4L2kpO1xyXG5cdFx0XHRpZiAoaGVpZ2h0TWF0Y2ggJiYgaGVpZ2h0TWF0Y2hbMV0pIHtcclxuXHRcdFx0XHRzcGVjaWZpZWRIZWlnaHQgPSBwYXJzZUludChoZWlnaHRNYXRjaFsxXSwgMTApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRjb25zdCB6b29tTWF0Y2ggPSBzdHlsZVN0cmluZy5tYXRjaCgvem9vbTpcXHMqKFxcZCspJT8vaSk7IC8vIHpvb21cdTUwM0NcdTU0MEVcdTc2ODQgJSBcdTY2MkZcdTUzRUZcdTkwMDlcdTc2ODRcclxuXHRcdFx0aWYgKHpvb21NYXRjaCAmJiB6b29tTWF0Y2hbMV0pIHtcclxuXHRcdFx0XHRjdXJyZW50Wm9vbVAgPSBwYXJzZUludCh6b29tTWF0Y2hbMV0sIDEwKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChwYXRoKSB7XHJcblx0XHRcdC8vIFx1NUZDNVx1OTg3Qlx1ODk4MVx1NjcwOXNyY1x1NUM1RVx1NjAyN1xyXG5cdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdHBhdGg6IHBhdGgudHJpbSgpLFxyXG5cdFx0XHRcdGFsdFRleHQ6IGFsdFRleHQgPyBhbHRUZXh0LnRyaW0oKSA6IHVuZGVmaW5lZCxcclxuXHRcdFx0XHRzcGVjaWZpZWRXaWR0aCxcclxuXHRcdFx0XHRzcGVjaWZpZWRIZWlnaHQsXHJcblx0XHRcdFx0Y3VycmVudFpvb21QZXJjZW50OiBjdXJyZW50Wm9vbVAsXHJcblx0XHRcdFx0aXNIdG1sOiB0cnVlLFxyXG5cdFx0XHRcdG9yaWdpbmFsTWF0Y2g6IG9yaWdpbmFsSHRtbFRhZyxcclxuXHRcdFx0XHRzdGFydEluZGV4SW5MaW5lOiBodG1sTWF0Y2guaW5kZXggPz8gMCxcclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHJldHVybiBudWxsOyAvLyBcdTY3MkFcdTUzMzlcdTkxNERcdTUyMzBcdTUzRUZcdThCQzZcdTUyMkJcdTc2ODRcdTU2RkVcdTcyNDdcdThCRURcdTZDRDVcclxufVxyXG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsc0JBQXVCO0FBQ3ZCLGtCQUFtRDs7O0FDc0Q1QyxTQUFTLHlCQUNmLFVBQ3lCO0FBekQxQjtBQStEQyxRQUFNLGdCQUFnQjtBQUN0QixNQUFJLFFBQVEsU0FBUyxNQUFNLGFBQWE7QUFFeEMsTUFBSSxPQUFPO0FBQ1YsVUFBTSxVQUFVLE1BQU0sQ0FBQyxLQUFLO0FBQzVCLFVBQU0sbUJBQW1CLE1BQU0sQ0FBQztBQUNoQyxVQUFNLE9BQU8sTUFBTSxDQUFDLEVBQUUsS0FBSztBQUMzQixRQUFJO0FBQ0osUUFBSTtBQUVKLFFBQUksa0JBQWtCO0FBQ3JCLFlBQU0sT0FBTyxpQkFBaUIsTUFBTSxHQUFHO0FBQ3ZDLFVBQUksS0FBSyxDQUFDLEdBQUc7QUFDWix5QkFBaUIsU0FBUyxLQUFLLENBQUMsR0FBRyxFQUFFO0FBQUEsTUFDdEM7QUFDQSxVQUFJLEtBQUssU0FBUyxLQUFLLEtBQUssQ0FBQyxHQUFHO0FBQy9CLDBCQUFrQixTQUFTLEtBQUssQ0FBQyxHQUFHLEVBQUU7QUFBQSxNQUN2QztBQUFBLElBQ0Q7QUFDQSxXQUFPO0FBQUEsTUFDTjtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0EsZUFBZSxNQUFNLENBQUM7QUFBQSxNQUN0QixtQkFBa0IsV0FBTSxVQUFOLFlBQWU7QUFBQSxNQUNqQyxRQUFRO0FBQUEsSUFDVDtBQUFBLEVBQ0Q7QUFLQSxRQUFNLGdCQUFnQjtBQUN0QixVQUFRLFNBQVMsTUFBTSxhQUFhO0FBQ3BDLE1BQUksT0FBTztBQUNWLFVBQU0sT0FBTyxNQUFNLENBQUMsRUFBRSxLQUFLO0FBQzNCLFVBQU0sa0JBQWtCLE1BQU0sQ0FBQztBQUMvQixRQUFJO0FBQ0osUUFBSTtBQUNKLFFBQUksVUFBOEI7QUFFbEMsUUFBSSxpQkFBaUI7QUFDcEIsWUFBTSxXQUFXLGdCQUFnQixNQUFNLG9CQUFvQjtBQUMzRCxVQUFJLFVBQVU7QUFFYixZQUFJLFNBQVMsQ0FBQyxHQUFHO0FBQ2hCLDJCQUFpQixTQUFTLFNBQVMsQ0FBQyxHQUFHLEVBQUU7QUFBQSxRQUMxQztBQUNBLFlBQUksU0FBUyxDQUFDLEdBQUc7QUFDaEIsNEJBQWtCLFNBQVMsU0FBUyxDQUFDLEdBQUcsRUFBRTtBQUFBLFFBQzNDO0FBQ0Esa0JBQVU7QUFBQSxNQUNYO0FBQUEsSUFDRDtBQUNBLFdBQU87QUFBQSxNQUNOO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQSxlQUFlLE1BQU0sQ0FBQztBQUFBLE1BQ3RCLG1CQUFrQixXQUFNLFVBQU4sWUFBZTtBQUFBLE1BQ2pDLFFBQVE7QUFBQSxJQUNUO0FBQUEsRUFDRDtBQUVBLFFBQU0sZUFDTDtBQUNELFFBQU0sWUFBWSxTQUFTLE1BQU0sWUFBWTtBQUU3QyxNQUFJLFdBQVc7QUFDZCxVQUFNLGtCQUFrQixVQUFVLENBQUM7QUFDbkMsVUFBTSxPQUFPLFVBQVUsQ0FBQyxLQUFLLFVBQVUsQ0FBQztBQUN4QyxVQUFNLFVBQVUsVUFBVSxDQUFDLEtBQUssVUFBVSxDQUFDLEtBQUs7QUFDaEQsVUFBTSxjQUFjLFVBQVUsQ0FBQyxLQUFLLFVBQVUsQ0FBQyxLQUFLO0FBRXBELFFBQUk7QUFDSixRQUFJO0FBQ0osUUFBSTtBQUVKLFFBQUksYUFBYTtBQUNoQixZQUFNLGFBQWEsWUFBWSxNQUFNLG1CQUFtQjtBQUN4RCxVQUFJLGNBQWMsV0FBVyxDQUFDLEdBQUc7QUFDaEMseUJBQWlCLFNBQVMsV0FBVyxDQUFDLEdBQUcsRUFBRTtBQUFBLE1BQzVDO0FBRUEsWUFBTSxjQUFjLFlBQVksTUFBTSxvQkFBb0I7QUFDMUQsVUFBSSxlQUFlLFlBQVksQ0FBQyxHQUFHO0FBQ2xDLDBCQUFrQixTQUFTLFlBQVksQ0FBQyxHQUFHLEVBQUU7QUFBQSxNQUM5QztBQUVBLFlBQU0sWUFBWSxZQUFZLE1BQU0sa0JBQWtCO0FBQ3RELFVBQUksYUFBYSxVQUFVLENBQUMsR0FBRztBQUM5Qix1QkFBZSxTQUFTLFVBQVUsQ0FBQyxHQUFHLEVBQUU7QUFBQSxNQUN6QztBQUFBLElBQ0Q7QUFFQSxRQUFJLE1BQU07QUFFVCxhQUFPO0FBQUEsUUFDTixNQUFNLEtBQUssS0FBSztBQUFBLFFBQ2hCLFNBQVMsVUFBVSxRQUFRLEtBQUssSUFBSTtBQUFBLFFBQ3BDO0FBQUEsUUFDQTtBQUFBLFFBQ0Esb0JBQW9CO0FBQUEsUUFDcEIsUUFBUTtBQUFBLFFBQ1IsZUFBZTtBQUFBLFFBQ2YsbUJBQWtCLGVBQVUsVUFBVixZQUFtQjtBQUFBLE1BQ3RDO0FBQUEsSUFDRDtBQUFBLEVBQ0Q7QUFFQSxTQUFPO0FBQ1I7OztBRHpLQSxTQUFTLHVCQUNSLE1BQ0EsU0FDNkU7QUFDN0UsTUFBSTtBQUVKLE1BQUksUUFBUSxRQUFXO0FBQ3RCLFFBQUk7QUFDSCxZQUFNLEtBQUssU0FBUyxPQUFPO0FBQUEsSUFDNUIsU0FBUyxHQUFQO0FBRUQsYUFBTztBQUFBLElBQ1I7QUFBQSxFQUNEO0FBRUEsTUFBSSxRQUFRLFFBQVEsUUFBUTtBQUFXLFdBQU87QUFFOUMsTUFBSTtBQUNILFVBQU0sT0FBTyxLQUFLLE1BQU0sSUFBSSxPQUFPLEdBQUc7QUFDdEMsWUFBUSxJQUFJLCtDQUFZLE1BQU0sR0FBRztBQUNqQyxXQUFPO0FBQUEsTUFDTjtBQUFBLE1BQ0EsVUFBVSxLQUFLO0FBQUEsTUFDZixVQUFVLEtBQUs7QUFBQSxNQUNmLFFBQVEsS0FBSztBQUFBLElBQ2Q7QUFBQSxFQUNELFNBQVMsR0FBUDtBQUNELFlBQVEsTUFBTSxrREFBa0QsS0FBSyxDQUFDO0FBQ3RFLFdBQU87QUFBQSxFQUNSO0FBQ0Q7QUFFQSxJQUFxQiw2QkFBckIsY0FBd0QsdUJBQU87QUFBQSxFQUM5RCxNQUFNLFNBQVM7QUFDZCxZQUFRLElBQUksK0RBQWE7QUFDekIsU0FBSyx3QkFBd0IsS0FBSyxnQ0FBZ0MsQ0FBQztBQUFBLEVBQ3BFO0FBQUEsRUFFQSxrQ0FBa0M7QUFFakMsV0FBTyx1QkFBVyxVQUFVLG9CQUFvQjtBQUFBLEVBQ2pEO0FBQUEsRUFFQSxXQUFXO0FBQ1YsWUFBUSxJQUFJLG1EQUFXO0FBQUEsRUFDeEI7QUFDRDtBQUVBLElBQU0sdUJBQU4sTUFBMkI7QUFBQTtBQUFBLEVBK0IxQixZQUFvQixNQUFrQjtBQUFsQjtBQTdCcEIsU0FBUSxpQkFBMEM7QUFFbEQsU0FBUSwrQkFBb0Q7QUFDNUQsU0FBUSxnQ0FBcUQ7QUFDN0QsU0FBUSwrQkFBb0Q7QUFHNUQ7QUFBQTtBQUFBLFNBQVEsYUFBYTtBQUNyQixTQUFRLGFBQWE7QUFDckIsU0FBUSxhQUFhO0FBQ3JCLFNBQVEsb0JBQW9CO0FBQzVCO0FBQUEsU0FBUSxxQkFBcUI7QUFDN0I7QUFBQSxTQUFRLHFCQUFxQjtBQUM3QjtBQUFBLFNBQVEsc0JBS0c7QUFDWDtBQUFBLFNBQVEsbUJBS0c7QUFDWDtBQUFBLFNBQVEsZUFBZTtBQUN2QjtBQUFBLFNBQVEsZUFBZTtBQUN2QjtBQUFBLFNBQVEsMEJBQTBCO0FBR2pDLFNBQUssYUFBYSxLQUFLO0FBRXZCLFNBQUssMkJBQ0osS0FBSyx5QkFBeUIsS0FBSyxJQUFJO0FBQ3hDLFNBQUssNEJBQ0osS0FBSywwQkFBMEIsS0FBSyxJQUFJO0FBRXpDLFNBQUssK0JBQ0osS0FBSyw2QkFBNkIsS0FBSyxJQUFJO0FBQzVDLFNBQUssdUNBQ0osS0FBSyxxQ0FBcUMsS0FBSyxJQUFJO0FBQ3BELFNBQUssd0JBQXdCLEtBQUssc0JBQXNCLEtBQUssSUFBSTtBQUVqRSxTQUFLLFdBQVc7QUFBQSxNQUNmO0FBQUEsTUFDQSxLQUFLO0FBQUEsSUFDTjtBQUNBLFNBQUssV0FBVztBQUFBLE1BQ2Y7QUFBQSxNQUNBLEtBQUs7QUFBQSxJQUNOO0FBQUEsRUFDRDtBQUFBLEVBRUEsT0FBTyxRQUFvQjtBQUUxQixRQUFJLEtBQUssY0FBYyxPQUFPLFlBQVk7QUFDekMsWUFBTSxhQUFhLEtBQUs7QUFDeEIsVUFBSSxjQUFjLENBQUMsU0FBUyxLQUFLLFNBQVMsVUFBVSxHQUFHO0FBR3RELGFBQUssZUFBZTtBQUFBLE1BQ3JCLFdBQVcsS0FBSyxxQkFBcUI7QUFHcEMsWUFBSTtBQUNILGdCQUFNLGNBQWMsS0FBSyxLQUFLLE1BQU0sSUFBSTtBQUFBLFlBQ3ZDLEtBQUssb0JBQW9CO0FBQUEsVUFDMUI7QUFDQSxjQUNDLFlBQVksU0FBUyxLQUFLLG9CQUFvQixVQUM3QztBQUFBLFVBR0Y7QUFBQSxRQUNELFNBQVMsR0FBUDtBQUVELGVBQUssZUFBZTtBQUFBLFFBQ3JCO0FBQUEsTUFDRDtBQUFBLElBQ0Q7QUFBQSxFQUNEO0FBQUEsRUFFUSxpQkFBaUI7QUFDeEIsU0FBSyxhQUFhO0FBQ2xCLGFBQVM7QUFBQSxNQUNSO0FBQUEsTUFDQSxLQUFLO0FBQUEsSUFDTjtBQUNBLGFBQVMsb0JBQW9CLFdBQVcsS0FBSyxxQkFBcUI7QUFDbEUsU0FBSyxzQkFBc0I7QUFDM0IsU0FBSyxtQkFBbUI7QUFHeEIsUUFBSSxLQUFLLGdCQUFnQjtBQUN4QixXQUFLLGVBQWUsTUFBTSxTQUFTO0FBQUEsSUFDcEM7QUFBQSxFQUNEO0FBQUEsRUFFQSxVQUFVO0FBQ1QsU0FBSyxXQUFXO0FBQUEsTUFDZjtBQUFBLE1BQ0EsS0FBSztBQUFBLElBQ047QUFDQSxTQUFLLFdBQVc7QUFBQSxNQUNmO0FBQUEsTUFDQSxLQUFLO0FBQUEsSUFDTjtBQUNBLFNBQUssc0JBQXNCO0FBRTNCLGFBQVM7QUFBQSxNQUNSO0FBQUEsTUFDQSxLQUFLO0FBQUEsSUFDTjtBQUNBLGFBQVMsb0JBQW9CLFdBQVcsS0FBSyxxQkFBcUI7QUFBQSxFQUNuRTtBQUFBLEVBRVEsd0JBQXdCO0FBQy9CLFFBQUksS0FBSyxnQkFBZ0I7QUFDeEIsV0FBSyxlQUFlLFVBQVUsT0FBTyx1QkFBdUI7QUFDNUQsV0FBSyxlQUFlLE1BQU0sU0FBUztBQUVuQyxVQUFJLEtBQUs7QUFDUixhQUFLLDZCQUE2QjtBQUNuQyxVQUFJLEtBQUs7QUFDUixhQUFLLDhCQUE4QjtBQUNwQyxVQUFJLEtBQUs7QUFDUixhQUFLLDZCQUE2QjtBQUVuQyxXQUFLLCtCQUErQjtBQUNwQyxXQUFLLGdDQUFnQztBQUNyQyxXQUFLLCtCQUErQjtBQUNwQyxXQUFLLGlCQUFpQjtBQUFBLElBQ3ZCO0FBRUEsUUFBSSxLQUFLLFlBQVk7QUFDcEIsV0FBSyxlQUFlO0FBQUEsSUFDckI7QUFBQSxFQUNEO0FBQUEsRUFFUSx5QkFBeUIsT0FBbUI7QUFDbkQsUUFBSSxLQUFLO0FBQVk7QUFFckIsVUFBTSxnQkFBZ0IsTUFBTTtBQUM1QixRQUFJLDBCQUEwQjtBQUc5QixVQUFNLFdBQVcsY0FBYztBQUFBLE1BQzlCO0FBQUEsSUFDRDtBQUVBLFFBQ0MsWUFDQSxTQUFTLGFBQWEsU0FDdEIsS0FBSyxXQUFXLFNBQVMsUUFBUSxHQUNoQztBQUNELFlBQU0sWUFBWTtBQUNsQixnQ0FBMEI7QUFFMUIsVUFBSSxLQUFLLG1CQUFtQixXQUFXO0FBQ3RDLGFBQUssc0JBQXNCO0FBQzNCLGFBQUssaUJBQWlCO0FBQ3RCLGtCQUFVLFVBQVUsSUFBSSx1QkFBdUI7QUFFL0MsY0FBTSxtQkFBbUIsQ0FBQyxNQUN6QixLQUFLLDZCQUE2QixHQUFHLFNBQVM7QUFDL0MsY0FBTSxvQkFBb0IsQ0FBQyxNQUMxQixLQUFLLDhCQUE4QixHQUFHLFNBQVM7QUFDaEQsY0FBTSxtQkFBbUIsQ0FBQyxNQUN6QixLQUFLLDZCQUE2QixHQUFHLFNBQVM7QUFFL0Msa0JBQVUsaUJBQWlCLGFBQWEsZ0JBQWdCO0FBQ3hELGtCQUFVLGlCQUFpQixjQUFjLGlCQUFpQjtBQUMxRCxrQkFBVSxpQkFBaUIsYUFBYSxnQkFBZ0I7QUFFeEQsYUFBSywrQkFBK0IsTUFDbkMsVUFBVTtBQUFBLFVBQ1Q7QUFBQSxVQUNBO0FBQUEsUUFDRDtBQUNELGFBQUssZ0NBQWdDLE1BQ3BDLFVBQVU7QUFBQSxVQUNUO0FBQUEsVUFDQTtBQUFBLFFBQ0Q7QUFDRCxhQUFLLCtCQUErQixNQUNuQyxVQUFVO0FBQUEsVUFDVDtBQUFBLFVBQ0E7QUFBQSxRQUNEO0FBQUEsTUFDRjtBQUFBLElBQ0Q7QUFFQSxRQUFJLENBQUMsMkJBQTJCLEtBQUssZ0JBQWdCO0FBQ3BELFVBQUksQ0FBQyxLQUFLLGVBQWUsU0FBUyxhQUFhLEdBQUc7QUFDakQsYUFBSyxzQkFBc0I7QUFBQSxNQUM1QjtBQUFBLElBQ0Q7QUFBQSxFQUNEO0FBQUEsRUFFUSwwQkFBMEIsT0FBbUI7QUFDcEQsUUFBSSxLQUFLO0FBQVk7QUFFckIsVUFBTSx5QkFDTCxDQUFDLE1BQU0saUJBQ1AsQ0FBQyxLQUFLLFdBQVcsU0FBUyxNQUFNLGFBQXFCO0FBQ3RELFFBQUksd0JBQXdCO0FBQzNCLFdBQUssc0JBQXNCO0FBQUEsSUFDNUI7QUFBQSxFQUNEO0FBQUEsRUFFUSw2QkFDUCxPQUNBLFlBQ0M7QUFDRCxRQUFJLEtBQUssWUFBWTtBQUVwQjtBQUFBLElBQ0Q7QUFDQSxVQUFNLE9BQU8sV0FBVyxzQkFBc0I7QUFDOUMsVUFBTSxjQUFjO0FBQ3BCLFVBQU0sSUFBSSxNQUFNLFVBQVUsS0FBSztBQUMvQixVQUFNLElBQUksTUFBTSxVQUFVLEtBQUs7QUFFL0IsUUFBSSxjQUFjO0FBQ2xCLFVBQU0sYUFBYSxJQUFJO0FBQ3ZCLFVBQU0sY0FBYyxJQUFJLEtBQUssUUFBUTtBQUNyQyxVQUFNLFlBQVksSUFBSTtBQUN0QixVQUFNLGVBQWUsSUFBSSxLQUFLLFNBQVM7QUFFdkMsUUFBSSxhQUFhO0FBQVksb0JBQWM7QUFBQSxhQUNsQyxhQUFhO0FBQWEsb0JBQWM7QUFBQSxhQUN4QyxnQkFBZ0I7QUFBWSxvQkFBYztBQUFBLGFBQzFDLGdCQUFnQjtBQUFhLG9CQUFjO0FBQUEsYUFDM0MsY0FBYztBQUFhLG9CQUFjO0FBQUEsYUFDekMsYUFBYTtBQUFjLG9CQUFjO0FBRWxELGVBQVcsTUFBTSxTQUFTO0FBQUEsRUFDM0I7QUFBQSxFQUVRLDhCQUNQLE9BQ0EsWUFDQztBQUNELFFBQUksQ0FBQyxLQUFLLFlBQVk7QUFFckIsaUJBQVcsTUFBTSxTQUFTO0FBQUEsSUFDM0I7QUFBQSxFQUNEO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLUSw2QkFDUCxPQUNBLFlBQ0M7QUFDRCxVQUFNLGNBQWMsV0FBVyxNQUFNO0FBQ3JDLFFBQUksZUFBZSxZQUFZLFNBQVMsU0FBUyxHQUFHO0FBQ25ELFlBQU0sZUFBZTtBQUNyQixZQUFNLGdCQUFnQjtBQUV0QixXQUFLLHNCQUFzQjtBQUFBLFFBQzFCLEtBQUs7QUFBQSxRQUNMO0FBQUEsTUFDRDtBQUVBLFVBQUksS0FBSyxxQkFBcUI7QUFDN0IsY0FBTSxFQUFFLFVBQVUsU0FBUyxJQUFJLEtBQUs7QUFDcEMsY0FBTSxhQUFhLHlCQUF5QixRQUFRO0FBRXBELFlBQUksWUFBWTtBQUNmLGVBQUssbUJBQW1CO0FBQUE7QUFBQSxZQUV2QixNQUFNLFdBQVc7QUFBQSxZQUNqQixTQUFTLFdBQVc7QUFBQSxZQUNwQixhQUFhLFdBQVc7QUFBQSxZQUN4QixjQUFjLFdBQVc7QUFBQSxVQUMxQjtBQUNBLGtCQUFRO0FBQUEsWUFDUCwrQ0FDQyxLQUFLLGlCQUFpQixlQUNaLFdBQVcsU0FBUyxTQUFTLGdCQUN2QyxXQUFXLHFCQUNMLFdBQVcseUJBQ2pCLFdBQVc7QUFBQSxVQUViO0FBR0EsY0FBSSxXQUFXLGdCQUFnQjtBQUM5QixpQkFBSyxvQkFBb0IsV0FBVztBQUFBLFVBQ3JDLE9BQU87QUFDTixpQkFBSyxvQkFBb0IsV0FBVztBQUFBLFVBQ3JDO0FBQ0EsY0FBSSxDQUFDLEtBQUsscUJBQXFCLEtBQUsscUJBQXFCO0FBQ3hELGlCQUFLLG9CQUFvQjtBQUcxQixnQkFBTSxPQUFPLFdBQVcsc0JBQXNCO0FBQzlDLGVBQUssZUFBZSxLQUFLLE9BQU8sS0FBSyxRQUFRO0FBQzdDLGVBQUssZUFBZSxLQUFLLE1BQU0sS0FBSyxTQUFTO0FBQzdDLGVBQUssYUFBYSxNQUFNO0FBQ3hCLGVBQUssYUFBYSxNQUFNO0FBQ3hCLGdCQUFNLG9CQUFvQixNQUFNLFVBQVUsS0FBSztBQUMvQyxnQkFBTSxvQkFBb0IsTUFBTSxVQUFVLEtBQUs7QUFDL0MsZUFBSywwQkFBMEIsS0FBSztBQUFBLFlBQ25DLG9CQUFvQixvQkFDbkIsb0JBQW9CO0FBQUEsVUFDdEI7QUFHQSxjQUFJLFdBQVcsUUFBUTtBQUV0QixpQkFBSyxxQkFDSixXQUFXLHVCQUF1QixTQUMvQixXQUFXLHFCQUNYO0FBRUosb0JBQVE7QUFBQSxjQUNQLHNDQUFrQixLQUFLLG1EQUErQixLQUFLLGlCQUFpQixrQkFBa0IsS0FBSyxpQkFBaUI7QUFBQSxZQUNySDtBQUFBLFVBQ0QsT0FBTztBQUVOLGlCQUFLLHFCQUFxQjtBQUUxQixnQkFBSSxjQUFjO0FBQ2xCLGdCQUFJLEtBQUssaUJBQWlCO0FBQ3pCLDZCQUFlLFVBQVUsS0FBSyxpQkFBaUI7QUFDaEQsZ0JBQUksS0FBSyxpQkFBaUI7QUFDekIsNkJBQWUsV0FBVyxLQUFLLGlCQUFpQjtBQUNqRCwyQkFBZSxTQUFTLEtBQUs7QUFFN0Isa0JBQU0sY0FBYyxLQUFLLGlCQUFpQixVQUN2QyxXQUFXLEtBQUssaUJBQWlCLE9BQU8sSUFDeEM7QUFDSCxrQkFBTSxZQUFZLGFBQ2pCLEtBQUssaUJBQWlCLGNBQ2IsdUJBQXVCLFlBQVksS0FBSztBQUVsRCxrQkFBTSxPQUFPLFdBQVcsV0FBVztBQUNuQyxrQkFBTSxLQUFLLE9BQU8sV0FBVyxjQUFjO0FBRTNDLG9CQUFRO0FBQUEsY0FDUCwwQ0FBc0IsV0FBVywwQkFBcUI7QUFBQSxZQUN2RDtBQUNBLGtCQUFNLEtBQUssS0FBSyxLQUFLLE1BQU0sT0FBTztBQUFBLGNBQ2pDLFNBQVMsRUFBRSxNQUFNLElBQUksUUFBUSxVQUFVO0FBQUEsY0FDdkMsV0FBVztBQUFBLGdCQUNWLFFBQVEsS0FBSyxLQUFLLE1BQU0sVUFBVSxLQUFLO0FBQUEsY0FDeEM7QUFBQSxjQUNBLFdBQVc7QUFBQSxZQUNaLENBQUM7QUFDRCxpQkFBSyxLQUFLLFNBQVMsRUFBRTtBQUFBLFVBQ3RCO0FBQUEsUUFDRCxPQUFPO0FBQ04sa0JBQVE7QUFBQSxZQUNQO0FBQUEsWUFDQTtBQUFBLFVBQ0Q7QUFDQSxlQUFLLGVBQWU7QUFDcEI7QUFBQSxRQUNEO0FBQUEsTUFDRCxPQUFPO0FBQ04sZ0JBQVEsS0FBSywyRkFBMEI7QUFDdkMsYUFBSyxlQUFlO0FBQ3BCO0FBQUEsTUFDRDtBQUVBLFdBQUssYUFBYTtBQUNsQixlQUFTO0FBQUEsUUFDUjtBQUFBLFFBQ0EsS0FBSztBQUFBLE1BQ047QUFDQSxlQUFTLGlCQUFpQixXQUFXLEtBQUsscUJBQXFCO0FBQUEsSUFDaEU7QUFBQSxFQUNEO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLUSxxQ0FBcUMsT0FBbUI7QUFyYmpFO0FBc2JFLFFBQ0MsQ0FBQyxLQUFLLGNBQ04sQ0FBQyxLQUFLLGtCQUNOLENBQUMsS0FBSyx1QkFDTixHQUFDLFVBQUsscUJBQUwsbUJBQXVCLE9BQ3ZCO0FBQ0QsV0FBSyxlQUFlO0FBQ3BCO0FBQUEsSUFDRDtBQUNBLFVBQU0sZUFBZTtBQUNyQixVQUFNLGdCQUFnQjtBQUV0QixVQUFNLGdCQUFnQixNQUFNO0FBQzVCLFVBQU0sZ0JBQWdCLE1BQU07QUFHNUIsVUFBTSxvQkFBb0IsZ0JBQWdCLEtBQUs7QUFDL0MsVUFBTSxvQkFBb0IsZ0JBQWdCLEtBQUs7QUFDL0MsVUFBTSwwQkFBMEIsS0FBSztBQUFBLE1BQ3BDLG9CQUFvQixvQkFDbkIsb0JBQW9CO0FBQUEsSUFDdEI7QUFHQSxVQUFNLGlCQUNMLDBCQUEwQixLQUFLO0FBS2hDLFVBQU0sa0JBQWtCO0FBQ3hCLFVBQU0sWUFBWSxpQkFBaUI7QUFFbkMsUUFBSSxVQUFVLEtBQUssTUFBTSxLQUFLLHFCQUFxQixTQUFTO0FBQzVELGNBQVUsS0FBSyxJQUFJLElBQUksS0FBSyxJQUFJLFNBQVMsR0FBRyxDQUFDO0FBRTdDLFNBQUssZUFBZSxNQUFNLE9BQU8sR0FBRztBQUFBLEVBR3JDO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLUSxzQkFBc0IsT0FBbUI7QUFDaEQsUUFDQyxDQUFDLEtBQUssY0FDTixDQUFDLEtBQUssa0JBQ04sQ0FBQyxLQUFLLHVCQUNOLENBQUMsS0FBSyxrQkFDTDtBQUVELFdBQUssZUFBZTtBQUNwQjtBQUFBLElBQ0Q7QUFDQSxVQUFNLGVBQWU7QUFDckIsVUFBTSxnQkFBZ0I7QUFFdEIsVUFBTSxpQkFBaUIsS0FBSyxlQUFlLE1BQU0sS0FBSyxNQUFNLE9BQU87QUFDbkUsUUFBSSxtQkFBbUIsS0FBSztBQUM1QixRQUFJLGtCQUFrQixlQUFlLENBQUMsR0FBRztBQUN4Qyx5QkFBbUIsU0FBUyxlQUFlLENBQUMsR0FBRyxFQUFFO0FBQUEsSUFDbEQ7QUFDQSx1QkFBbUIsS0FBSyxJQUFJLElBQUksS0FBSyxJQUFJLGtCQUFrQixHQUFHLENBQUM7QUFFL0QsWUFBUSxJQUFJLDJEQUFjLG1CQUFtQjtBQUc3QyxRQUFJLG1CQUFtQjtBQUN2QixRQUFJLEtBQUssaUJBQWlCLGFBQWE7QUFDdEMsMEJBQW9CLFVBQVUsS0FBSyxpQkFBaUI7QUFBQSxJQUNyRDtBQUNBLFFBQUksS0FBSyxpQkFBaUIsY0FBYztBQUN2QywwQkFBb0IsV0FBVyxLQUFLLGlCQUFpQjtBQUFBLElBQ3REO0FBQ0Esd0JBQW9CLFNBQVM7QUFFN0IsVUFBTSxtQkFBbUIsS0FBSyxpQkFBaUIsVUFDNUMsV0FBVyxLQUFLLGlCQUFpQixPQUFPLElBQ3hDO0FBQ0gsVUFBTSxpQkFBaUIsYUFDdEIsS0FBSyxpQkFBaUIsY0FDYiw0QkFBNEIsaUJBQWlCLEtBQUs7QUFHNUQsVUFBTSxFQUFFLFNBQVMsSUFBSSxLQUFLO0FBRTFCLFVBQU0scUJBQXFCLEtBQUssS0FBSyxNQUFNLElBQUksT0FBTyxRQUFRLEVBQUU7QUFJaEUsVUFBTSx1QkFBdUIsSUFBSTtBQUFBLE1BQ2hDLHNCQUFzQjtBQUFBLFFBQ3JCLEtBQUssaUJBQWlCO0FBQUEsTUFDdkIsU0FBUyxhQUFhLEtBQUssaUJBQWlCLElBQUs7QUFBQTtBQUFBLE1BRWpEO0FBQUEsSUFDRDtBQUVBLFVBQU0saUJBQWlCLG1CQUFtQixNQUFNLG9CQUFvQjtBQUNwRSxRQUFJLFNBQTZCO0FBRWpDLFFBQUksa0JBQWtCLGVBQWUsVUFBVSxRQUFXO0FBQ3pELGdCQUFVLFdBQVcsZUFBZTtBQUNwQyxjQUFRLFVBQVUsZUFBZSxDQUFDLEVBQUU7QUFBQSxJQUNyQyxPQUFPO0FBTU4sY0FBUTtBQUFBLFFBQ1AsOEhBQXlDLGtEQUE4QixLQUFLLGlCQUFpQjtBQUFBLE1BQzlGO0FBR0EsWUFBTSxxQkFBcUI7QUFBQSxRQUMxQixLQUFLLG9CQUFvQjtBQUFBLE1BQzFCO0FBQ0EsVUFDQyxzQkFDQSxtQkFBbUIsU0FBUyxLQUFLLGlCQUFpQixNQUNqRDtBQUNELGdCQUFRO0FBQUEsVUFDUDtBQUFBLFFBQ0Q7QUFDQSxrQkFBVSxXQUFXLG1CQUFtQjtBQUN4QyxnQkFBUSxVQUFVLG1CQUFtQixjQUFjO0FBQUEsTUFDcEQsT0FBTztBQUNOLGFBQUssZUFBZTtBQUNwQjtBQUFBLE1BQ0Q7QUFBQSxJQUNEO0FBRUEsUUFBSSxZQUFZLFVBQWEsVUFBVSxRQUFXO0FBQ2pELFlBQU0sS0FBSyxLQUFLLEtBQUssTUFBTSxPQUFPO0FBQUEsUUFDakMsU0FBUyxFQUFFLE1BQU0sU0FBUyxJQUFJLE9BQU8sUUFBUSxlQUFlO0FBQUEsUUFDNUQsV0FBVyxFQUFFLFFBQVEsS0FBSyxLQUFLLE1BQU0sVUFBVSxLQUFLLEtBQUs7QUFBQSxRQUN6RCxXQUFXO0FBQUEsTUFDWixDQUFDO0FBQ0QsV0FBSyxLQUFLLFNBQVMsRUFBRTtBQUNyQixjQUFRO0FBQUEsUUFDUCxpQkFDQyxLQUFLLGlCQUFpQix5Q0FDWCxpQkFBaUIsS0FBSztBQUFBLE1BQ25DO0FBQUEsSUFDRDtBQUNBLFNBQUssZUFBZTtBQUFBLEVBQ3JCO0FBQ0Q7QUFHQSxTQUFTLFdBQVcsUUFBd0I7QUFDM0MsU0FBTyxPQUNMLFFBQVEsTUFBTSxPQUFPLEVBQ3JCLFFBQVEsTUFBTSxNQUFNLEVBQ3BCLFFBQVEsTUFBTSxNQUFNLEVBQ3BCLFFBQVEsTUFBTSxRQUFRLEVBQ3RCLFFBQVEsTUFBTSxRQUFRO0FBQ3pCO0FBR0EsU0FBUyxhQUFhLFFBQXdCO0FBQzdDLFNBQU8sT0FBTyxRQUFRLHVCQUF1QixNQUFNO0FBQ3BEOyIsCiAgIm5hbWVzIjogW10KfQo=
